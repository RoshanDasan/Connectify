import{c as E,j as e,G as R,a6 as T,v as z,r as o,u as G,a7 as L,N as M,S as O,a8 as N,d as c,w as a,A as w,a9 as $,B as C,T as f,I as q,a as F,k as H,W as J,aa as K,ab as Q,ac as X,ad as Y,ae as Z,af as _}from"./index-135ee7aa.js";import{C as ee}from"./Container-982c8a80.js";import{G as n}from"./Grid-5e361bee.js";const se=E(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined"),re=()=>{const{id:j}=R(),S=T(),g=z(r=>r.token),[i,I]=o.useState({}),[b,D]=o.useState(!1),[P,u]=o.useState(!0),[x,m]=o.useState(""),[p,y]=o.useState(!1),k=G(),U=async()=>{const r=await J(j,g);I(r)};o.useEffect(()=>{U()},[b]);const{getRootProps:A,getInputProps:W}=L({onDrop:(r,s)=>{var l,d;console.log(r,s),s.length>0&&(m("Maximum file size exceeded"),u(!0)),r.length>0&&((d=(l=r[0])==null?void 0:l.type)!=null&&d.startsWith("image")?(v(V=>({...V,file:r[0]})),m("")):(u(!0),m("Select a valid image")))}}),[t,v]=o.useState({userName:"",file:"",bio:"",gender:"",city:""}),h=r=>{u(!1);const{name:s,value:l}=r.target;v(d=>({...d,[s]:l}))},B=async r=>{r.preventDefault(),console.log(t,"form value");const s=new FormData;if(t.file){const l=K(X,`profile/${t.file.name+Q()}`);await Y(l,t.file);const d=await Z(l);s.append("file",d),s.append("picturePath",t.file.name)}t.userName.trim()===""?s.append("userName",i.userName):s.append("userName",t.userName),t.bio.trim()===""?s.append("bio",i.bio):s.append("bio",t.bio),t.gender.trim()===""?s.append("gender",i.gender):s.append("gender",t.gender),t.city.trim()===""?s.append("city",i.city):s.append("city",t.city),S.mutate({id:j,values:s,token:g}),D(!b),k(_({userName:t.userName})),m("success")};return e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsxs(ee,{maxWidth:"sm",children:[e.jsx(O,{}),x.length>0&&x!=="success"&&e.jsx(N,{severity:"error",children:x}),x==="success"&&e.jsx(N,{severity:"success",children:"Profile updated"}),e.jsx(c,{variant:"h3",sx:{paddingTop:"3rem",textAlign:"left"},children:"Edit Profile"}),e.jsx(a,{children:e.jsxs("form",{onSubmit:B,children:[e.jsxs(n,{container:!0,alignItems:"center",children:[e.jsx(n,{item:!0,xs:3,children:e.jsx(a,{sx:{margin:"2rem 2rem 2rem 5rem"},children:i.dp?e.jsx("div",{className:"profile-picture",children:e.jsx(w,{alt:i.userName,src:i.dp})}):e.jsx(w,{alt:i.userName})})}),e.jsxs(n,{item:!0,xs:9,children:[e.jsxs("div",{...A({className:"dropzone"}),children:[e.jsx("input",{...W()}),e.jsx("p",{style:{cursor:"pointer",color:"blue",marginLeft:"20px"},onClick:()=>u(!1),children:"Upload profile picture"})]}),!p&&e.jsx($,{title:"update",arrow:!0,children:e.jsx(C,{sx:{color:"black",marginLeft:"25px"},onClick:()=>y(!p),children:i.userName})})]})]}),e.jsxs(n,{container:!0,spacing:3,children:[p&&e.jsx(n,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(a,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"userName"})}),e.jsx(a,{sx:{width:"70%"},children:e.jsx(f,{name:"userName",fullWidth:!0,multiline:!0,defaultValue:i.userName,onChange:h,InputProps:{endAdornment:e.jsx(q,{position:"start",children:e.jsx(F,{onClick:()=>y(!p),children:e.jsx(se,{})})})}})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(a,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"Bio"})}),e.jsx(a,{sx:{width:"70%"},children:e.jsx(f,{name:"bio",fullWidth:!0,multiline:!0,rows:4,defaultValue:i.bio,onChange:h})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(a,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"Gender"})}),e.jsx(a,{sx:{width:"70%"},children:e.jsx(f,{name:"gender",fullWidth:!0,multiline:!0,defaultValue:i.gender,onChange:h})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(a,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"City"})}),e.jsx(a,{sx:{width:"70%"},children:e.jsx(f,{name:"city",fullWidth:!0,multiline:!0,defaultValue:i.city,onChange:h})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(C,{type:"submit",disabled:P,variant:"contained",color:"info",sx:{borderRadius:"10px",marginLeft:"10rem"},children:"Submit"})})]})]})}),e.jsx(H,{position:"bottom-left"})]})]})};export{re as default};
