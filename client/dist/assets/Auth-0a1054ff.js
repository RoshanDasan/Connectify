import{c as q,j as e,r as w,u as y,a as I,B as f,s as j,b as v}from"./index-a5948f15.js";import{V as k,a as A,u as L,b as U,c as b,d as n,e as T}from"./VisibilityOff-04b29b5f.js";import{G as h}from"./Grid-886fa904.js";import{T as V}from"./TextField-d7cc1d76.js";import{I as F}from"./InputAdornment-9fc81eb3.js";import{I as G,k as W,P as B,T as E,Q as C}from"./api-073887aa.js";/* empty css                      */import{r as R,l as $,g as M}from"./authConnect-2ac10695.js";import{s as O,p as z,a as D}from"./GoogleAuth-5ad9a5a3.js";import{C as H}from"./Container-27f65e3d.js";import{A as Q}from"./Avatar-0d908d90.js";import"./FormControl-dea6ebde.js";const _=q(e.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google"),t=({name:o,handleChange:p,value:g,error:a,label:u,half:l,autoFocus:m,type:d,handleShowPassword:x})=>e.jsx(h,{item:!0,xs:12,sm:l?6:12,children:e.jsx(V,{name:o,onChange:p,value:g,variant:"outlined",fullWidth:!0,label:u,autoFocus:m,type:d,error:!!a,helperText:a,InputProps:o==="password"?{endAdornment:e.jsx(F,{position:"end",children:e.jsx(G,{onClick:x,children:d==="password"?e.jsx(k,{}):e.jsx(A,{})})})}:void 0})}),le=()=>{let o=L();const[p,g]=w.useState(!1),[a,u]=w.useState(!1),l=y(),m=I(),d=()=>{g(r=>!r)},x=async r=>{if(a)await R(r)=="success"&&u(c=>!c);else{let i=await $(r);i&&(l(j({user:i.user,token:i.token})),l(v({user:i.user})),m("/home"),C.success("Login success"))}},N=()=>{O(D,z).then(async r=>{const i=r._tokenResponse,{user:c,token:P}=await M(i);l(j({user:c,token:P})),l(v({user:c})),m("/home"),C.success("Login success")})},s=U({initialValues:{name:"",userName:"",number:"",email:"",password:"",confirmPassword:""},validationSchema:(()=>a?b().shape({name:n().required("Name is required"),userName:n().required("UserName is required"),number:n().required("Number is required"),email:n().email("Invalid email").required("Email is required"),password:n().required("Password is required"),confirmPassword:n().oneOf([T("password")],"Passwords must match")}):b().shape({userName:n().required("UserName is required"),password:n().required("Password is required")}))(),onSubmit:x}),S=()=>{u(r=>!r)};return e.jsxs(H,{component:"main",maxWidth:"xs",children:[e.jsx(W,{position:"bottom-left"}),e.jsxs(B,{className:o.paper,elevation:6,children:[e.jsx(Q,{className:o.avatar}),e.jsx(E,{component:"h1",variant:"h5",children:a?"Sign up":"Sign in"}),e.jsxs("form",{className:o.form,onSubmit:s.handleSubmit,children:[e.jsxs(h,{container:!0,spacing:2,children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(t,{name:"name",label:"Name",handleChange:s.handleChange,value:s.values.name,error:s.errors.name,autoFocus:!0,half:!0}),e.jsx(t,{name:"userName",label:"UserName",handleChange:s.handleChange,value:s.values.userName,error:s.errors.userName,half:!0})]}),!a&&e.jsx(t,{name:"userName",label:"UserName",handleChange:s.handleChange,value:s.values.userName,error:s.errors.userName}),a&&e.jsxs(e.Fragment,{children:[e.jsx(t,{name:"number",label:"Number",handleChange:s.handleChange,value:s.values.number,error:s.errors.number,type:"number"}),e.jsx(t,{name:"email",label:"Email Address",handleChange:s.handleChange,value:s.values.email,error:s.errors.email,type:"email"})]}),e.jsx(t,{name:"password",label:"Password",handleChange:s.handleChange,value:s.values.password,error:s.errors.password,type:p?"text":"password",handleShowPassword:d}),a&&e.jsx(t,{name:"confirmPassword",label:"Repeat Password",handleChange:s.handleChange,value:s.values.confirmPassword,error:s.errors.confirmPassword,type:"password"})]}),e.jsx(f,{type:"submit",fullWidth:!0,variant:"contained",color:"info",sx:{marginTop:"20px"},className:o.submit,children:a?"Sign Up":"Sign In"}),e.jsx(h,{container:!0,justifyContent:"flex-end",children:e.jsx(h,{item:!0,children:e.jsx(f,{onClick:S,color:"inherit",children:a?"Already have an account? Login In":"New user? Sign Up"})})}),e.jsx(f,{fullWidth:!0,variant:"contained",color:"info",startIcon:e.jsx(_,{}),onClick:N,children:"Sign in with Google"})]})]})]})};export{le as default};
