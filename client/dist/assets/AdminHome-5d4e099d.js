import{r,j as e,az as L,v as O,P as $,A as w,B as j,aA as I,aB as H,aC as Q,aD as z,ar as G,w as k,a as u,aE as J,Q as W,F as q,J as K,d as V,k as X}from"./index-135ee7aa.js";import{T as Y,a as Z,b as ee,c as p,d as n,e as se,f as ne,g as te,D as ae,h as A,i as S,j as B,k as U,A as ie}from"./LastPage-5b7f76a5.js";import{b as le}from"./authConnect-d8bd7a44.js";function oe(t){const l=G(),{count:c,page:i,rowsPerPage:d,onPageChange:a}=t,m=o=>{a(o,0)},h=o=>{a(o,i-1)},b=o=>{a(o,i+1)},C=o=>{a(o,Math.max(0,Math.ceil(c/d)-1))};return e.jsxs(k,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(u,{onClick:m,disabled:i===0,"aria-label":"first page",children:l.direction==="rtl"?e.jsx(A,{}):e.jsx(S,{})}),e.jsx(u,{onClick:h,disabled:i===0,"aria-label":"previous page",children:l.direction==="rtl"?e.jsx(B,{}):e.jsx(U,{})}),e.jsx(u,{onClick:b,disabled:i>=Math.ceil(c/d)-1,"aria-label":"next page",children:l.direction==="rtl"?e.jsx(U,{}):e.jsx(B,{})}),e.jsx(u,{onClick:C,disabled:i>=Math.ceil(c/d)-1,"aria-label":"last page",children:l.direction==="rtl"?e.jsx(S,{}):e.jsx(A,{})})]})}const N=[5,10,25,{label:"All",value:-1}],re=r.forwardRef(function(l,c){return e.jsx(L,{direction:"up",ref:c,...l})});function ce(){const[t,l]=r.useState([]),c=O(s=>s.admintoken),[i,d]=r.useState(0),[a,m]=r.useState(N[0]),[h,b]=r.useState({}),[C,o]=r.useState(!1),[P,D]=r.useState(!1),M=async()=>{const s=await J(c,"undefined");l(s)};r.useEffect(()=>{M()},[P]);const _=t==null?void 0:t.length;r.useEffect(()=>{d(0)},[a]);const x=t?t.slice(i*a,i*a+a):t==null?void 0:t.slice(i*a,i*a+a),y=Math.max(0,a-(x==null?void 0:x.length)),E=s=>{d(s)},F=s=>{m(parseInt(s.target.value,10))},T=(s,g)=>{o(!0),b({userId:s,status:g})},f=()=>{o(!1)},R=async()=>{console.log(h),f();let{status:s}=await le(h.userId);W.success(s),D(()=>!P)};return e.jsxs(Y,{component:$,children:[e.jsxs(Z,{sx:{minWidth:500},"aria-label":"custom pagination table",children:[e.jsxs(ee,{children:[" ",e.jsxs(p,{children:[e.jsx(n,{children:"Avatar"}),e.jsx(n,{children:"Name"}),e.jsx(n,{align:"right",children:"UserName"}),e.jsx(n,{align:"right",children:"Email"}),e.jsx(n,{align:"right",children:"Gender"}),e.jsx(n,{align:"right",children:"Followers"}),e.jsx(n,{align:"right",children:"Followings"}),e.jsx(n,{align:"right",children:"Actions"})]})]}),e.jsxs(se,{children:[x.map(s=>{var g,v;return e.jsxs(p,{children:[e.jsx(n,{component:"th",scope:"row",children:s.dp?e.jsx("div",{children:e.jsx(w,{sx:{width:"3rem",height:"3rem"},alt:s.userName,src:s.dp})}):e.jsx(w,{sx:{width:"3rem",height:"3rem"},alt:s.userName})}),e.jsx(n,{component:"th",scope:"row",children:s.name}),e.jsx(n,{style:{width:160},align:"right",children:s.userName}),e.jsx(n,{style:{width:160},align:"right",children:s.email}),e.jsx(n,{style:{width:160},align:"right",children:s.gender}),e.jsx(n,{style:{width:160},align:"right",children:(g=s.followers)==null?void 0:g.length}),e.jsx(n,{style:{width:160},align:"right",children:(v=s.following)==null?void 0:v.length}),e.jsx(n,{style:{width:160},align:"right",children:s.isBlock==!0?e.jsx(j,{variant:"outlined",onClick:()=>T(s._id,"Unblock"),children:"unblock"}):e.jsx(j,{variant:"outlined",color:"error",onClick:()=>T(s._id,"Block"),children:"block"})})]},s._id)}),y>0&&e.jsx(p,{style:{height:53*y},children:e.jsx(n,{colSpan:7})})]}),e.jsx(ne,{children:e.jsx(p,{children:e.jsx(te,{rowsPerPageOptions:N,colSpan:7,count:_,rowsPerPage:a,page:i,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:E,onRowsPerPageChange:F,ActionsComponent:oe})})})]}),e.jsx("div",{children:e.jsxs(I,{open:C,TransitionComponent:re,keepMounted:!0,onClose:f,"aria-describedby":"alert-dialog-slide-description",children:[e.jsx(H,{children:`Are you sure do you want to ${h.status} this user ?`}),e.jsx(Q,{children:e.jsx(ae,{id:"alert-dialog-slide-description"})}),e.jsxs(z,{children:[e.jsx(j,{color:"info",onClick:f,children:"Cancel"}),e.jsx(j,{color:"info",onClick:R,children:"Ok"})]})]})})]})}const de=q(t=>({contentContainer:{justifyContent:"center",[t.breakpoints.down("sm")]:{flexDirection:"column"}},navbar:{height:50}})),je=()=>{const t=de(),l=K("(min-width: 800px)");return e.jsxs(e.Fragment,{children:[e.jsxs(k,{className:t.contentContainer,children:[e.jsx("div",{className:t.navbar,children:e.jsx(V,{textAlign:"center",variant:"h3",p:2,children:"User list"})}),l&&e.jsx(ie,{}),e.jsx(k,{marginLeft:l?30:void 0,children:e.jsx(ce,{})})]}),e.jsx(X,{position:"bottom-left"})]})};export{je as default};
