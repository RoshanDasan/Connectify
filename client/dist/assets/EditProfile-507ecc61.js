import{c as V,j as e,z as W,q as z,r as o,B as N}from"./index-bf33396f.js";import{a as E}from"./Sidebar-8a667937.js";import{N as R,T as L}from"./Navbar-af09f3f9.js";import{u as G,g as M}from"./userConnection-a0238410.js";import{u as O,A as w,v as q}from"./v4-f7b74a65.js";import{T as c,I as $,k as F}from"./api-ccc87ef9.js";import{r as H,b as J,u as K,g as Q}from"./GoogleAuth-5ad9a5a3.js";import{C as X}from"./Container-0e259a93.js";import{B as t}from"./MenuItem-dbe7b88d.js";import{G as n}from"./Grid-9d4a005b.js";import{A as C}from"./Avatar-efc85e3e.js";import{T as h}from"./TextField-f331c2a9.js";import{I as Y}from"./InputAdornment-7a6c4588.js";import"./DisplayFlex-abd62217.js";import"./makeStyles-f89d6ef3.js";import"./FormControl-a981626d.js";const Z=V(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined"),fe=()=>{const{id:j}=W(),S=G(),g=z(a=>a.token),[r,I]=o.useState({}),[b,P]=o.useState(!1),[k,u]=o.useState(!0),[m,x]=o.useState(""),[p,y]=o.useState(!1),D=async()=>{const a=await M(j,g);I(a)};o.useEffect(()=>{D()},[b]);const{getRootProps:U,getInputProps:A}=O({onDrop:(a,s)=>{var l,d;console.log(a,s),s.length>0&&(x("Maximum file size exceeded"),u(!0)),a.length>0&&((d=(l=a[0])==null?void 0:l.type)!=null&&d.startsWith("image")?(v(T=>({...T,file:a[0]})),x("")):(u(!0),x("Select a valid image")))}}),[i,v]=o.useState({userName:"",file:"",bio:"",gender:"",city:""}),f=a=>{u(!1);const{name:s,value:l}=a.target;v(d=>({...d,[s]:l}))},B=async a=>{a.preventDefault(),console.log(i,"form value");const s=new FormData;if(i.file){const l=H(J,`profile/${i.file.name+q()}`);await K(l,i.file);const d=await Q(l);s.append("file",d),s.append("picturePath",i.file.name)}i.userName.trim()===""?s.append("userName",r.userName):s.append("userName",i.userName),i.bio.trim()===""?s.append("bio",r.bio):s.append("bio",i.bio),i.gender.trim()===""?s.append("gender",r.gender):s.append("gender",i.gender),i.city.trim()===""?s.append("city",r.city):s.append("city",i.city),S.mutate({id:j,values:s,token:g}),P(!b),x("success")};return e.jsxs(e.Fragment,{children:[e.jsx(R,{}),e.jsxs(X,{maxWidth:"sm",children:[e.jsx(E,{}),m.length>0&&m!=="success"&&e.jsx(w,{severity:"error",children:m}),m==="success"&&e.jsx(w,{severity:"success",children:"Profile updated"}),e.jsx(c,{variant:"h3",sx:{paddingTop:"3rem",textAlign:"left"},children:"Edit Profile"}),e.jsx(t,{children:e.jsxs("form",{onSubmit:B,children:[e.jsxs(n,{container:!0,alignItems:"center",children:[e.jsx(n,{item:!0,xs:3,children:e.jsx(t,{sx:{margin:"2rem 2rem 2rem 5rem"},children:r.dp?e.jsx("div",{className:"profile-picture",children:e.jsx(C,{alt:r.userName,src:r.dp})}):e.jsx(C,{alt:r.userName})})}),e.jsxs(n,{item:!0,xs:9,children:[e.jsxs("div",{...U({className:"dropzone"}),children:[e.jsx("input",{...A()}),e.jsx("p",{style:{cursor:"pointer",color:"blue",marginLeft:"20px"},onClick:()=>u(!1),children:"Upload profile picture"})]}),!p&&e.jsx(L,{title:"update",arrow:!0,children:e.jsx(N,{sx:{color:"black",marginLeft:"25px"},onClick:()=>y(!p),children:r.userName})})]})]}),e.jsxs(n,{container:!0,spacing:3,children:[p&&e.jsx(n,{item:!0,xs:12,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"userName"})}),e.jsx(t,{sx:{width:"70%"},children:e.jsx(h,{name:"userName",fullWidth:!0,multiline:!0,defaultValue:r.userName,onChange:f,InputProps:{endAdornment:e.jsx(Y,{position:"start",children:e.jsx($,{onClick:()=>y(!p),children:e.jsx(Z,{})})})}})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"Bio"})}),e.jsx(t,{sx:{width:"70%"},children:e.jsx(h,{name:"bio",fullWidth:!0,multiline:!0,rows:4,defaultValue:r.bio,onChange:f})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"Gender"})}),e.jsx(t,{sx:{width:"70%"},children:e.jsx(h,{name:"gender",fullWidth:!0,multiline:!0,defaultValue:r.gender,onChange:f})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(t,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(t,{sx:{width:"30%"},children:e.jsx(c,{variant:"subtitle1",children:"City"})}),e.jsx(t,{sx:{width:"70%"},children:e.jsx(h,{name:"city",fullWidth:!0,multiline:!0,defaultValue:r.city,onChange:f})})]})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(N,{type:"submit",disabled:k,variant:"contained",color:"info",sx:{borderRadius:"10px",marginLeft:"10rem"},children:"Submit"})})]})]})}),e.jsx(F,{position:"bottom-left"})]})]})};export{fe as default};
