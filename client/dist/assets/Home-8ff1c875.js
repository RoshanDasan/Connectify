import{g as Me,d as Le,k as G,e as q,f as z,_ as B,h as Z,r as l,i as ze,l as De,j as e,m as Be,n as Ue,o as We,p as He,c as A,a as de,q as w,u as te,t as Te,R as ee,B as X,v as qe,w as Ee,x as Ke,y as Qe,b as Xe}from"./index-67d43168.js";import{T as Ye,N as Ge}from"./Navbar-e0d66199.js";import{u as Oe,T as $,a as he,I as L,M as Ze,b as Je,Q as ie,m as es,k as ss}from"./api-d1289068.js";/* empty css                      */import{g as re,f as ts,s as pe,a as rs}from"./userConnection-7fd5fe15.js";import{s as os,F as k}from"./DisplayFlex-8670f53a.js";import{B as y,M as xe,u as ns}from"./MenuItem-4b486c7a.js";import{S as W,d as as,a as is}from"./Sidebar-40567f1a.js";import{A as H}from"./Avatar-3069ed79.js";import{A as ls,D as cs,v as ds}from"./v4-3496c763.js";import{u as us,r as ms,l as hs,a as ps,p as xs,g as ne,d as fs,b as gs}from"./postConnection-42fa878a.js";import{r as js,b as vs,u as fe,g as ge}from"./GoogleAuth-5ad9a5a3.js";import{I as je}from"./InputAdornment-9c831944.js";import{S as le}from"./Send-156a4cb0.js";import{T as ue}from"./TextField-41d2a6e6.js";import{D as Y}from"./makeStyles-e2d4fbc3.js";import{d as ve}from"./MoreVert-8ec3fb13.js";import{D as bs,a as Cs,b as ks,c as ys}from"./DialogTitle-fad11cc1.js";import"./FormControl-663bf9fa.js";function ws(s){return Me("MuiCircularProgress",s)}Le("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ps=["className","color","disableShrink","size","style","thickness","value","variant"];let oe=s=>s,be,Ce,ke,ye;const V=44,Ss=G(be||(be=oe`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),$s=G(Ce||(Ce=oe`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Rs=s=>{const{classes:t,variant:r,color:a,disableShrink:g}=s,c={root:["root",r,`color${z(a)}`],svg:["svg"],circle:["circle",`circle${z(r)}`,g&&"circleDisableShrink"]};return Ue(c,ws,t)},Is=q("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[r.variant],t[`color${z(r.color)}`]]}})(({ownerState:s,theme:t})=>B({display:"inline-block"},s.variant==="determinate"&&{transition:t.transitions.create("transform")},s.color!=="inherit"&&{color:(t.vars||t).palette[s.color].main}),({ownerState:s})=>s.variant==="indeterminate"&&Z(ke||(ke=oe`
      animation: ${0} 1.4s linear infinite;
    `),Ss)),Ms=q("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(s,t)=>t.svg})({display:"block"}),Ls=q("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.circle,t[`circle${z(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(({ownerState:s,theme:t})=>B({stroke:"currentColor"},s.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},s.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:s})=>s.variant==="indeterminate"&&!s.disableShrink&&Z(ye||(ye=oe`
      animation: ${0} 1.4s ease-in-out infinite;
    `),$s)),zs=l.forwardRef(function(t,r){const a=ze({props:t,name:"MuiCircularProgress"}),{className:g,color:c="primary",disableShrink:m=!1,size:j=40,style:d,thickness:h=3.6,value:x=0,variant:p="indeterminate"}=a,f=De(a,Ps),u=B({},a,{color:c,disableShrink:m,size:j,thickness:h,value:x,variant:p}),o=Rs(u),n={},C={},b={};if(p==="determinate"){const P=2*Math.PI*((V-h)/2);n.strokeDasharray=P.toFixed(3),b["aria-valuenow"]=Math.round(x),n.strokeDashoffset=`${((100-x)/100*P).toFixed(3)}px`,C.transform="rotate(-90deg)"}return e.jsx(Is,B({className:Be(o.root,g),style:B({width:j,height:j},C,d),ownerState:u,ref:r,role:"progressbar"},b,f,{children:e.jsx(Ms,{className:o.svg,ownerState:u,viewBox:`${V/2} ${V/2} ${V} ${V}`,children:e.jsx(Ls,{className:o.circle,style:n,ownerState:u,cx:V,cy:V,r:(V-h)/2,fill:"none",strokeWidth:h})})}))}),Ne=zs;function Ds(s){return Me("MuiLinearProgress",s)}Le("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Bs=["className","color","value","valueBuffer","variant"];let K=s=>s,we,Pe,Se,$e,Re,Ie;const ce=4,Us=G(we||(we=K`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Os=G(Pe||(Pe=K`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Ns=G(Se||(Se=K`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),_s=s=>{const{classes:t,variant:r,color:a}=s,g={root:["root",`color${z(a)}`,r],dashed:["dashed",`dashedColor${z(a)}`],bar1:["bar",`barColor${z(a)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${z(a)}`,r==="buffer"&&`color${z(a)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return Ue(g,Ds,t)},me=(s,t)=>t==="inherit"?"currentColor":s.vars?s.vars.palette.LinearProgress[`${t}Bg`]:s.palette.mode==="light"?We(s.palette[t].main,.62):He(s.palette[t].main,.5),As=q("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[`color${z(r.color)}`],t[r.variant]]}})(({ownerState:s,theme:t})=>B({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:me(t,s.color)},s.color==="inherit"&&s.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},s.variant==="buffer"&&{backgroundColor:"transparent"},s.variant==="query"&&{transform:"rotate(180deg)"})),Fs=q("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.dashed,t[`dashedColor${z(r.color)}`]]}})(({ownerState:s,theme:t})=>{const r=me(t,s.color);return B({position:"absolute",marginTop:0,height:"100%",width:"100%"},s.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Z($e||($e=K`
    animation: ${0} 3s infinite linear;
  `),Ns)),Vs=q("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.bar,t[`barColor${z(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:s,theme:t})=>B({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:s.color==="inherit"?"currentColor":(t.vars||t).palette[s.color].main},s.variant==="determinate"&&{transition:`transform .${ce}s linear`},s.variant==="buffer"&&{zIndex:1,transition:`transform .${ce}s linear`}),({ownerState:s})=>(s.variant==="indeterminate"||s.variant==="query")&&Z(Re||(Re=K`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Us)),Ws=q("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.bar,t[`barColor${z(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:s,theme:t})=>B({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},s.variant!=="buffer"&&{backgroundColor:s.color==="inherit"?"currentColor":(t.vars||t).palette[s.color].main},s.color==="inherit"&&{opacity:.3},s.variant==="buffer"&&{backgroundColor:me(t,s.color),transition:`transform .${ce}s linear`}),({ownerState:s})=>(s.variant==="indeterminate"||s.variant==="query")&&Z(Ie||(Ie=K`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Os)),Hs=l.forwardRef(function(t,r){const a=ze({props:t,name:"MuiLinearProgress"}),{className:g,color:c="primary",value:m,valueBuffer:j,variant:d="indeterminate"}=a,h=De(a,Bs),x=B({},a,{color:c,variant:d}),p=_s(x),f=Oe(),u={},o={bar1:{},bar2:{}};if((d==="determinate"||d==="buffer")&&m!==void 0){u["aria-valuenow"]=Math.round(m),u["aria-valuemin"]=0,u["aria-valuemax"]=100;let n=m-100;f.direction==="rtl"&&(n=-n),o.bar1.transform=`translateX(${n}%)`}if(d==="buffer"&&j!==void 0){let n=(j||0)-100;f.direction==="rtl"&&(n=-n),o.bar2.transform=`translateX(${n}%)`}return e.jsxs(As,B({className:Be(p.root,g),ownerState:x,role:"progressbar"},u,{ref:r},h,{children:[d==="buffer"?e.jsx(Fs,{className:p.dashed,ownerState:x}):null,e.jsx(Vs,{className:p.bar1,ownerState:x,style:o.bar1}),d==="determinate"?null:e.jsx(Ws,{className:p.bar2,ownerState:x,style:o.bar2})]}))}),Ts=Hs,ae=A(e.jsx("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h4.05l1.83-2h4.24l1.83 2H20v12zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"}),"CameraAltOutlined"),qs=A(e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutlineOutlined"),_e=A(e.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Es=A(e.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined"),Ks=A(e.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorderOutlined"),Qs=A(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"FavoriteOutlined"),Xs=A(e.jsx("path",{d:"M4 18v-.65c0-.34.16-.66.41-.81C6.1 15.53 8.03 15 10 15c.03 0 .05 0 .08.01.1-.7.3-1.37.59-1.98-.22-.02-.44-.03-.67-.03-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.42-.6-.75-1.28-.97-2H4zm6-6c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm10.75 10c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"ManageAccountsOutlined"),Ys=A(e.jsx("path",{d:"M4.34 2.93 2.93 4.34 7.29 8.7 7 9H3v6h4l5 5v-6.59l4.18 4.18c-.65.49-1.38.88-2.18 1.11v2.06c1.34-.3 2.57-.92 3.61-1.75l2.05 2.05 1.41-1.41L4.34 2.93zM10 15.17 7.83 13H5v-2h2.83l.88-.88L10 11.41v3.76zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-7-8-1.88 1.88L12 7.76zm4.5 8c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"}),"VolumeOffOutlined"),Gs=A(e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm7-.17v6.34L7.83 13H5v-2h2.83L10 8.83zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z"}),"VolumeUpOutlined"),se=os(y)(({})=>({padding:"1.5rem 1.5rem 0.75rem 1.5rem",borderRadius:"0.75rem"})),Zs=({userId:s,data:t})=>{const[r,a]=l.useState(null),[g,c]=l.useState(!0),m=Oe(),j=de(),d=w(n=>n.token),h=m.palette.text.primary,x=m.palette.text.secondary,p=async()=>{try{const n=await re(s,d);a(n),c(!1)}catch(n){throw n}};if(l.useEffect(()=>{p()},[t]),g)return e.jsx(se,{children:e.jsxs(k,{gap:"0.5rem",pb:"1.1rem",children:[e.jsx("div",{children:e.jsxs(k,{children:[e.jsx(W,{variant:"circular",width:40,height:40}),e.jsx("div",{children:e.jsxs(y,{ml:5,children:[e.jsx(W,{width:90,height:40}),e.jsx(W,{width:70,height:15}),e.jsx(W,{width:70,height:15})]})})]})}),e.jsx(W,{width:55,height:55})]})});const{userName:f,followers:u,following:o}=r;return e.jsx(se,{children:e.jsxs(k,{gap:"0.5rem",pb:"1.1rem",onClick:()=>j(`/profile/${s}`),children:[e.jsxs(k,{gap:"1rem",alignItems:"center",children:[r.dp?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:r.userName,src:r.dp})}):e.jsx(H,{alt:r.userName}),e.jsxs(y,{children:[e.jsx($,{variant:"h4",color:h,fontWeight:"bold",sx:{cursor:"pointer"},children:f}),e.jsxs($,{color:x,variant:"subtitle2",children:[u.length," followers"]}),e.jsxs($,{color:x,variant:"subtitle2",children:[o.length," following"]})]})]}),e.jsx(Ye,{title:"Profile settings",placement:"bottom",children:e.jsx(Xs,{sx:{fontSize:24,cursor:"pointer"}})})]})})};const Js=({onButtonClick:s})=>{const[t,r]=l.useState(!1),[a,g]=l.useState(""),[c,m]=l.useState(null),[j,d]=l.useState(""),[h,x]=l.useState(!0),[p,f]=l.useState(!1),[u,o]=l.useState(0),[n,C]=l.useState(""),{_id:b,userName:P}=w(i=>i.user),D=w(i=>i.token),F=w(i=>i.mode),N=te();l.useEffect(()=>{(async()=>{const{dp:R}=await re(b,D);g(R)})()},[b,D]);const E=async()=>{f(!0),setTimeout(()=>{f(!1)},4e3);const i=new FormData;if(i.append("userId",b),i.append("userName",P),i.append("description",j),c){const U=js(vs,`posts/${c.name+ds()}`);if(c.name.toLowerCase().endsWith(".mp4")){await fe(U,c);const O=await ge(U);i.append("video",O),i.append("videoPath",c.name)}else{await fe(U,c);const O=await ge(U);i.append("image",O),i.append("picturePath",c.name)}}const R=await us(D,i);N(Te({posts:R.newPost})),m(null),d(""),f(!1),s()},T=i=>{d(i.target.value),/^\s*$/.test(i.target.value)?x(!0):x(!1)};return l.useEffect(()=>{const i=setInterval(()=>{o(R=>{if(R===100)return 0;const U=Math.random()*10;return Math.min(R+U,100)})},500);return()=>{clearInterval(i)}},[]),e.jsxs(e.Fragment,{children:[n.length>0&&e.jsx(ls,{severity:"error",children:n}),e.jsxs(se,{children:[e.jsxs(k,{gap:"1.5rem",children:[a?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:P,src:a})}):e.jsx(H,{alt:P}),F==="dark"?e.jsxs(e.Fragment,{children:[e.jsx(he,{placeholder:"Enter your thoughts",onChange:T,value:j,sx:{width:"100%",border:"2px solid black",color:"black",borderRadius:"2rem",padding:".5rem 1.5rem"},endAdornment:e.jsx(je,{position:"end",children:e.jsx(L,{onClick:()=>r(!t),children:e.jsx(ae,{})})})}),e.jsx(L,{onClick:E,disabled:p||h,children:e.jsx(le,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{placeholder:"Enter your thoughts",onChange:T,value:j,sx:{width:"100%",border:"2px solid black",color:"black",borderRadius:"2rem",padding:".5rem .2rem .5rem 1.5rem"},endAdornment:e.jsx(je,{position:"end",children:e.jsx(L,{onClick:()=>r(!t),children:e.jsx(ae,{})})})}),e.jsx(L,{onClick:E,disabled:p||h,children:e.jsx(le,{})})]})]}),t&&e.jsx(y,{border:"1px solid black",borderRadius:"5px",mt:"1rem",p:"1rem",children:e.jsx(cs,{multiple:!0,onDrop:(i,R)=>{console.log(i[0].name.endsWith("mp4"),"acc"),console.log(R,"rej"),i[0]&&i[0]&&(i[0].name.endsWith(".jpg")||i[0].name.endsWith(".png")||i[0].name.endsWith(".mp4"))?(m(i[0]),C("")):C("Please select a valid file")},children:({getRootProps:i,getInputProps:R})=>e.jsxs(k,{children:[e.jsxs(y,{...i(),sx:{"&:hover":{cursor:"pointer"}},children:[e.jsx(ue,{...R()}),c?e.jsxs(k,{alignItems:"center",children:[e.jsx($,{children:c.name}),e.jsx(Es,{fontSize:"small"})]}):e.jsx("p",{children:"Upload image or video here"})]}),e.jsx(ae,{}),c&&e.jsx(L,{onClick:()=>m(null),sx:{width:"15%"},children:e.jsx(_e,{fontSize:"small"})})]})})}),p&&e.jsx(Ts,{variant:"determinate",value:u}),!h&&e.jsx($,{variant:"body2",children:"Please enter a post"}),e.jsx(Y,{sx:{mt:"1rem"}})]})]})},et=({postId:s,name:t,image:r,friendId:a,buttonClick:g})=>{const[c,m]=ee.useState(null),[j,d]=ee.useState(!1),h=de(),x=w(I=>I.user._id),p=w(I=>I.token),f=te(),[u,o]=ee.useState(!1),[n,C]=l.useState(""),b=!!c,P=I=>{m(I.currentTarget)},D=()=>{m(null)},F=()=>{o(!0)},N=()=>{o(!1)},E=async(I,O)=>{D();const Q=await ts(I,O,p);f(qe({unfollower:Q==null?void 0:Q.data.friend._id})),g(),ie.success(`You unfollowed ${t}`)},T=()=>{D(),d(!0)},i=()=>{d(!1)},R=async I=>{console.log(I),console.log(n);const O=await ms(x,s,n,p);console.log(O),i(),N()},U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,borderRadios:"5px",p:2,height:"16rem",width:"30rem"};return e.jsxs(k,{m:"0.5rem 0 1.5rem 0",children:[e.jsxs(k,{gap:"1rem",onClick:()=>h(`/profile/${a}`),children:[r?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:t,src:`http://localhost:5000/uploads/${r}`})}):e.jsx(H,{alt:t}),e.jsx(y,{children:e.jsx($,{variant:"h5",fontWeight:"500",sx:{"&:hover":{color:"blue",cursor:"pointer"}},children:t})})]}),e.jsxs("div",{children:[a===x?e.jsx(e.Fragment,{children:e.jsx(L,{"aria-label":"more",id:"long-button","aria-controls":b?"long-menu":void 0,"aria-expanded":b?"true":void 0,"aria-haspopup":"true",onClick:P,children:e.jsx(ve,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(L,{"aria-label":"more",id:"long-button","aria-controls":b?"long-menu":void 0,"aria-expanded":b?"true":void 0,"aria-haspopup":"true",onClick:P,children:e.jsx(ve,{})}),e.jsxs(Ze,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:c,open:b,onClose:D,PaperProps:{style:{width:"20ch"}},children:[e.jsx(xe,{onClick:T,sx:{color:"red"},children:"Report"}),e.jsx(xe,{onClick:()=>E(x,a),children:"Unfollow"})]})]}),e.jsx(Je,{open:j,onClose:i,children:e.jsxs(y,{sx:U,children:[e.jsx($,{variant:"h4",textAlign:"center",gutterBottom:!0,children:"Report User"}),e.jsx($,{variant:"body1",gutterBottom:!0,children:"Enter the reason for report:"}),e.jsx(y,{sx:{width:"98%"},children:e.jsx(ue,{name:"bio",label:"Enter....",fullWidth:!0,multiline:!0,rows:4,onChange:I=>C(I.target.value),value:n})}),e.jsxs(y,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[e.jsx(X,{onClick:i,sx:{marginRight:1},children:"Cancel"}),e.jsx(X,{variant:"contained",color:"primary",onClick:F,children:"Report"})]})]})}),e.jsxs(bs,{open:u,onClose:N,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(Cs,{id:"alert-dialog-title",children:`Are you sure want to report ${t}?`}),e.jsx(ks,{}),e.jsxs(ys,{children:[e.jsx(X,{onClick:N,color:"error",children:"Disagree"}),e.jsx(X,{onClick:()=>R(a),autoFocus:!0,color:"info",children:"Agree"})]})]})]})]})},st=({id:s,userId:t,description:r,userName:a,image:g,video:c,likes:m,commentList:j,globalClick:d})=>{const[h,x]=l.useState(!1),[p,f]=l.useState(""),[u,o]=l.useState([]),[n,C]=l.useState({}),b=w(v=>v.token),P=w(v=>v.user._id),{name:D}=w(v=>v.user),[F,N]=l.useState(m.includes(P)),[E,T]=l.useState(m.length),[i,R]=l.useState({status:!1,index:-1}),U=async(v,M)=>{hs(v,M,b),T(F?S=>S-1:S=>S+1),N(S=>!S)},I=async()=>{if(p&&!p.match(/^\s/)){if(n.userId)await ps(s,n.userId,n.comment,p),C({}),d();else{await xs(s,P,`${D} : ${p}`,b);const v=await ne(s,b),{comments:M}=v.data.post;o(M),d()}f("")}},O=async()=>{const v=await ne(s,b),{comments:M}=v.data.post;o(M),x(S=>!S),d()},Q=async v=>{fs(s,v,b);const M=await ne(s,b),{comments:S}=M.data.post;o(S),O(),d()},Ae=(v,M)=>{const S=v.split(":"),_=S[0].slice(0,S[0].length-1);C({name:`@${_}`,userId:M,comment:v}),d()},Fe=()=>{const[v,M]=l.useState(!0),S=()=>{M(_=>!_)};return e.jsxs("div",{style:{position:"relative"},children:[c?e.jsx("video",{src:c,width:"100%",style:{borderRadius:"0.75rem",marginTop:"0.75rem"},autoPlay:!0,loop:!0,muted:v,children:e.jsx("p",{children:"Your browser does not support the video tag."})}):e.jsx(y,{sx:{display:"flex"},children:e.jsx(Ne,{})}),e.jsx("button",{style:{position:"absolute",top:"20px",right:"10px",background:"transparent",border:"none",cursor:"pointer"},onClick:S,children:v?e.jsx(Ys,{}):e.jsx(Gs,{})})]})};return e.jsxs(se,{width:"30rem",children:[e.jsx(et,{postId:s,name:a,image:g,video:c,friendId:t,buttonClick:d}),e.jsx($,{sx:{mt:"1rem"},children:r}),g&&e.jsx("img",{src:g,alt:"img",width:"100%",loading:"lazy",style:{borderRadius:"0.75rem",marginTop:"0.75rem"}}),c&&e.jsx(Fe,{}),e.jsx(k,{mt:"0.25rem",children:e.jsxs(k,{gap:"1rem",children:[e.jsxs(k,{gap:"0.3rem",children:[e.jsx(L,{onClick:()=>U(s,P),children:F?e.jsx(Qs,{sx:{color:"red"}}):e.jsx(Ks,{})}),e.jsx($,{children:E})]}),e.jsxs(k,{gap:"0.3rem",children:[e.jsx(L,{onClick:()=>O(),children:e.jsx(qs,{})}),e.jsx($,{children:j.length})]})]})}),h&&e.jsxs(y,{mt:"0.5rem",bgcolor:"#f5f5f5",borderRadius:"8px",padding:"1rem",children:[u.map(({comment:v,userId:M,reply:S},_)=>e.jsxs(ee.Fragment,{children:[e.jsxs(y,{children:[e.jsx(Y,{}),e.jsxs(k,{alignItems:"center",children:[e.jsxs("div",{children:[e.jsx($,{sx:{"&:hover":{cursor:"pointer"},m:"0.5rem 0",pl:"1rem"},color:"black",children:v}),e.jsx("p",{onClick:()=>R(J=>({...J,[_]:!J[_]})),style:{cursor:"pointer"},children:"Reply comments"}),i[_]&&S.map((J,Ve)=>e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx("p",{children:J.reply},Ve)]}))]}),e.jsxs("div",{children:[e.jsx(X,{variant:"text",sx:{color:"black"},onClick:()=>Ae(v,M),children:"Reply"}),M===P&&e.jsx(L,{size:"small",onClick:()=>Q(_),children:e.jsx(_e,{})})]})]})]}),e.jsx(Y,{})]},_)),e.jsxs(y,{display:"flex",alignItems:"center",mt:"0.5rem",children:[e.jsx(ue,{variant:"outlined",fullWidth:!0,label:n.name?n.name:"Add a comment",size:"small",value:p,onChange:v=>f(v.target.value)}),n.name&&e.jsx(L,{onClick:()=>C({}),children:e.jsx(as,{})}),e.jsx(L,{onClick:I,children:e.jsx(le,{})})]})]}),e.jsx(Y,{sx:{marginTop:"4rem"}})]})},tt=({data:s,onButtonClick:t})=>{const r=te(),a=w(o=>o.token),g=w(o=>o.user._id),c=w(o=>o.user),[m,j]=l.useState([]),[d,h]=l.useState(!1),[x,p]=l.useState(!0),f=()=>{h(()=>!d)},u=async()=>{try{const o=await gs(a),n=o.filter(C=>c.followers.includes(C.userId)||C.userId==g);j(n),r(Ee({posts:o})),p(!1)}catch(o){throw o}};return l.useEffect(()=>{u()},[d,s]),e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx(Ne,{})}),e.jsx("div",{children:m.map(({_id:o,userId:n,description:C,userName:b,image:P,video:D,likes:F,comments:N})=>e.jsx(st,{id:o,userId:n,description:C,userName:b,image:P,video:D,likes:F,commentList:N,click:f,globalClick:t},o))})]})},rt=({friendId:s,image:t,userName:r,handleshowFreind:a,onButtonClick:g})=>{const{_id:c,requested:m}=w(f=>f.user),j=de(),[d,h]=l.useState(m.some(f=>f.id===s)),x=async(f,u)=>{const o=await pe(f,u);console.log(o,"requse send"),ie.success(o),h(!0),a(),g()},p=async(f,u)=>{h(!1);const o=await pe(f,u);ie.success(o),console.log(o)};return e.jsxs(k,{m:"0.5rem 0 1.5rem 0",children:[e.jsxs(k,{gap:"1rem",children:[t?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:r,src:t})}):e.jsx(H,{alt:r}),e.jsx(y,{children:e.jsx($,{variant:"h5",fontWeight:"500",sx:{"&:hover":{color:"blue",cursor:"pointer"}},onClick:()=>j(`/profile/${s}`),children:r})})]}),d?e.jsx(L,{onClick:()=>p(c,s),children:e.jsx($,{variant:"h6",color:"blue",children:"Requested"})}):e.jsx(L,{onClick:()=>x(c,s),children:e.jsx($,{variant:"h6",color:"blue",children:"Follow"})})]})},ot=({onButtonClick:s})=>{const t=w(u=>u.token),r=w(u=>u.user._id),[a,g]=l.useState(!1),[c,m]=l.useState([]),[j,d]=l.useState(!1),[h,x]=l.useState(!0),p=async()=>{const u=await rs(t,r),o=await re(r,t),n=u.filter(C=>!o.followers.includes(C._id));if(a)m(n);else{const C=n.slice(0,5);m(C)}x(!1)},f=()=>{d(()=>!j)};return l.useEffect(()=>{p()},[j,s,a]),e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx($,{children:"Suggested for you"}),e.jsx(Ke,{onClick:()=>g(!a),children:"See all"})]}),h?e.jsxs(k,{children:[e.jsx(W,{variant:"circular",width:50,height:50}),e.jsx(W,{width:80,height:45,sx:{alignItems:"start"}}),e.jsx(W,{width:70,height:50})]}):c.map(({userName:u,_id:o,dp:n})=>o!==r&&e.jsx(rt,{friendId:o,image:n,userName:u,handleshowFreind:f,onButtonClick:s},o))]})},nt=es(s=>({contentContainer:{display:"flex",justifyContent:"space-evenly",[s.breakpoints.down("sm")]:{flexDirection:"column"}}})),Pt=()=>{const s=nt(),t=ns("(min-width: 800px)"),r=te(),a=w(h=>h.token),g=w(h=>h.user._id),c=async()=>{const h=await re(g,a);r(Xe({user:h}))},[m,j]=l.useState(!1);l.useEffect(()=>{c(),r(Qe())},[]);const d=()=>{j(()=>!m)};return e.jsxs(e.Fragment,{children:[e.jsx(Ge,{}),e.jsxs(y,{className:s.contentContainer,children:[t&&e.jsx(is,{}),e.jsxs(y,{flexBasis:t?"26%":"100%",mt:t?void 0:"2rem",children:[e.jsx(Js,{onButtonClick:d}),e.jsx(tt,{data:m,onButtonClick:d})]}),t&&e.jsxs(y,{flexBasis:t?"26%":"100%",ml:"2rem",children:[e.jsx(Zs,{userId:g,picturePath:"",data:m}),e.jsx(ot,{onButtonClick:d})]})]}),e.jsx(ss,{position:"bottom-left"})]})};export{Pt as default};
