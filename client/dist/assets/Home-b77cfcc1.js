import{g as Ie,d as Me,k as Y,e as T,f as z,_ as D,h as G,r as i,i as Le,l as ze,j as e,m as De,n as Be,o as We,p as He,c as A,a as le,q as R,u as se,t as Te,R as J,B as Q,v as qe,w as Ee,x as Ke,y as Qe}from"./index-a28491d7.js";import{T as Xe,N as Ye}from"./Navbar-5227f93e.js";import{u as Ue,T as $,a as me,I as L,M as Ge,b as Ze,Q as ne,m as Je,k as es}from"./api-4c71416c.js";/* empty css                      */import{g as ce,f as ss,s as he,a as ts}from"./userConnection-8dca5c59.js";import{s as rs,F as y}from"./DisplayFlex-e3941e7b.js";import{B as P,M as pe,u as os}from"./MenuItem-0f82b46c.js";import{S as V,d as ns,a as as}from"./Sidebar-576339a5.js";import{A as H}from"./Avatar-57ebb6aa.js";import{A as is,D as ls,v as cs}from"./v4-f8050318.js";import{u as ds,r as us,l as ms,a as hs,p as ps,g as re,d as xs,b as fs}from"./postConnection-6209e897.js";import{r as gs,b as js,u as xe,g as fe}from"./GoogleAuth-5ad9a5a3.js";import{I as ge}from"./InputAdornment-34bc8835.js";import{S as ae}from"./Send-fe71bc24.js";import{T as de}from"./TextField-9918ff3b.js";import{D as X}from"./makeStyles-1646f606.js";import{d as je}from"./MoreVert-ab335279.js";import{D as bs,a as vs,b as Cs,c as ks}from"./DialogTitle-4560018e.js";import"./FormControl-47b82004.js";function ys(s){return Ie("MuiCircularProgress",s)}Me("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ws=["className","color","disableShrink","size","style","thickness","value","variant"];let te=s=>s,be,ve,Ce,ke;const F=44,Ps=Y(be||(be=te`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Ss=Y(ve||(ve=te`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),$s=s=>{const{classes:t,variant:r,color:a,disableShrink:x}=s,l={root:["root",r,`color${z(a)}`],svg:["svg"],circle:["circle",`circle${z(r)}`,x&&"circleDisableShrink"]};return Be(l,ys,t)},Rs=T("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[r.variant],t[`color${z(r.color)}`]]}})(({ownerState:s,theme:t})=>D({display:"inline-block"},s.variant==="determinate"&&{transition:t.transitions.create("transform")},s.color!=="inherit"&&{color:(t.vars||t).palette[s.color].main}),({ownerState:s})=>s.variant==="indeterminate"&&G(Ce||(Ce=te`
      animation: ${0} 1.4s linear infinite;
    `),Ps)),Is=T("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(s,t)=>t.svg})({display:"block"}),Ms=T("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.circle,t[`circle${z(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(({ownerState:s,theme:t})=>D({stroke:"currentColor"},s.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},s.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:s})=>s.variant==="indeterminate"&&!s.disableShrink&&G(ke||(ke=te`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Ss)),Ls=i.forwardRef(function(t,r){const a=Le({props:t,name:"MuiCircularProgress"}),{className:x,color:l="primary",disableShrink:m=!1,size:f=40,style:u,thickness:j=3.6,value:g=0,variant:h="indeterminate"}=a,p=ze(a,ws),d=D({},a,{color:l,disableShrink:m,size:f,thickness:j,value:g,variant:h}),o=$s(d),n={},b={},k={};if(h==="determinate"){const w=2*Math.PI*((F-j)/2);n.strokeDasharray=w.toFixed(3),k["aria-valuenow"]=Math.round(g),n.strokeDashoffset=`${((100-g)/100*w).toFixed(3)}px`,b.transform="rotate(-90deg)"}return e.jsx(Rs,D({className:De(o.root,x),style:D({width:f,height:f},b,u),ownerState:d,ref:r,role:"progressbar"},k,p,{children:e.jsx(Is,{className:o.svg,ownerState:d,viewBox:`${F/2} ${F/2} ${F} ${F}`,children:e.jsx(Ms,{className:o.circle,style:n,ownerState:d,cx:F,cy:F,r:(F-j)/2,fill:"none",strokeWidth:j})})}))}),Oe=Ls;function zs(s){return Ie("MuiLinearProgress",s)}Me("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Ds=["className","color","value","valueBuffer","variant"];let K=s=>s,ye,we,Pe,Se,$e,Re;const ie=4,Bs=Y(ye||(ye=K`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Us=Y(we||(we=K`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Os=Y(Pe||(Pe=K`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),_s=s=>{const{classes:t,variant:r,color:a}=s,x={root:["root",`color${z(a)}`,r],dashed:["dashed",`dashedColor${z(a)}`],bar1:["bar",`barColor${z(a)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${z(a)}`,r==="buffer"&&`color${z(a)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return Be(x,zs,t)},ue=(s,t)=>t==="inherit"?"currentColor":s.vars?s.vars.palette.LinearProgress[`${t}Bg`]:s.palette.mode==="light"?We(s.palette[t].main,.62):He(s.palette[t].main,.5),Ns=T("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[`color${z(r.color)}`],t[r.variant]]}})(({ownerState:s,theme:t})=>D({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:ue(t,s.color)},s.color==="inherit"&&s.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},s.variant==="buffer"&&{backgroundColor:"transparent"},s.variant==="query"&&{transform:"rotate(180deg)"})),As=T("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.dashed,t[`dashedColor${z(r.color)}`]]}})(({ownerState:s,theme:t})=>{const r=ue(t,s.color);return D({position:"absolute",marginTop:0,height:"100%",width:"100%"},s.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},G(Se||(Se=K`
    animation: ${0} 3s infinite linear;
  `),Os)),Fs=T("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.bar,t[`barColor${z(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:s,theme:t})=>D({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:s.color==="inherit"?"currentColor":(t.vars||t).palette[s.color].main},s.variant==="determinate"&&{transition:`transform .${ie}s linear`},s.variant==="buffer"&&{zIndex:1,transition:`transform .${ie}s linear`}),({ownerState:s})=>(s.variant==="indeterminate"||s.variant==="query")&&G($e||($e=K`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Bs)),Vs=T("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.bar,t[`barColor${z(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:s,theme:t})=>D({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},s.variant!=="buffer"&&{backgroundColor:s.color==="inherit"?"currentColor":(t.vars||t).palette[s.color].main},s.color==="inherit"&&{opacity:.3},s.variant==="buffer"&&{backgroundColor:ue(t,s.color),transition:`transform .${ie}s linear`}),({ownerState:s})=>(s.variant==="indeterminate"||s.variant==="query")&&G(Re||(Re=K`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Us)),Ws=i.forwardRef(function(t,r){const a=Le({props:t,name:"MuiLinearProgress"}),{className:x,color:l="primary",value:m,valueBuffer:f,variant:u="indeterminate"}=a,j=ze(a,Ds),g=D({},a,{color:l,variant:u}),h=_s(g),p=Ue(),d={},o={bar1:{},bar2:{}};if((u==="determinate"||u==="buffer")&&m!==void 0){d["aria-valuenow"]=Math.round(m),d["aria-valuemin"]=0,d["aria-valuemax"]=100;let n=m-100;p.direction==="rtl"&&(n=-n),o.bar1.transform=`translateX(${n}%)`}if(u==="buffer"&&f!==void 0){let n=(f||0)-100;p.direction==="rtl"&&(n=-n),o.bar2.transform=`translateX(${n}%)`}return e.jsxs(Ns,D({className:De(h.root,x),ownerState:g,role:"progressbar"},d,{ref:r},j,{children:[u==="buffer"?e.jsx(As,{className:h.dashed,ownerState:g}):null,e.jsx(Fs,{className:h.bar1,ownerState:g,style:o.bar1}),u==="determinate"?null:e.jsx(Vs,{className:h.bar2,ownerState:g,style:o.bar2})]}))}),Hs=Ws,oe=A(e.jsx("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h4.05l1.83-2h4.24l1.83 2H20v12zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"}),"CameraAltOutlined"),Ts=A(e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutlineOutlined"),_e=A(e.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),qs=A(e.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined"),Es=A(e.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorderOutlined"),Ks=A(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"FavoriteOutlined"),Qs=A(e.jsx("path",{d:"M4 18v-.65c0-.34.16-.66.41-.81C6.1 15.53 8.03 15 10 15c.03 0 .05 0 .08.01.1-.7.3-1.37.59-1.98-.22-.02-.44-.03-.67-.03-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.42-.6-.75-1.28-.97-2H4zm6-6c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm10.75 10c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"ManageAccountsOutlined"),Xs=A(e.jsx("path",{d:"M4.34 2.93 2.93 4.34 7.29 8.7 7 9H3v6h4l5 5v-6.59l4.18 4.18c-.65.49-1.38.88-2.18 1.11v2.06c1.34-.3 2.57-.92 3.61-1.75l2.05 2.05 1.41-1.41L4.34 2.93zM10 15.17 7.83 13H5v-2h2.83l.88-.88L10 11.41v3.76zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-7-8-1.88 1.88L12 7.76zm4.5 8c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"}),"VolumeOffOutlined"),Ys=A(e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm7-.17v6.34L7.83 13H5v-2h2.83L10 8.83zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z"}),"VolumeUpOutlined"),ee=rs(P)(({})=>({padding:"1.5rem 1.5rem 0.75rem 1.5rem",borderRadius:"0.75rem"})),Gs=({userId:s,data:t})=>{const[r,a]=i.useState(null),[x,l]=i.useState(!0),m=Ue(),f=le(),u=R(n=>n.token),j=m.palette.text.primary,g=m.palette.text.secondary,h=async()=>{try{const n=await ce(s,u);a(n),l(!1)}catch(n){throw n}};if(i.useEffect(()=>{h()},[t]),x)return e.jsx(ee,{children:e.jsxs(y,{gap:"0.5rem",pb:"1.1rem",children:[e.jsx("div",{children:e.jsxs(y,{children:[e.jsx(V,{variant:"circular",width:40,height:40}),e.jsx("div",{children:e.jsxs(P,{ml:5,children:[e.jsx(V,{width:90,height:40}),e.jsx(V,{width:70,height:15}),e.jsx(V,{width:70,height:15})]})})]})}),e.jsx(V,{width:55,height:55})]})});const{userName:p,followers:d,following:o}=r;return e.jsx(ee,{children:e.jsxs(y,{gap:"0.5rem",pb:"1.1rem",onClick:()=>f(`/profile/${s}`),children:[e.jsxs(y,{gap:"1rem",alignItems:"center",children:[r.dp?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:r.userName,src:r.dp})}):e.jsx(H,{alt:r.userName}),e.jsxs(P,{children:[e.jsx($,{variant:"h4",color:j,fontWeight:"bold",sx:{cursor:"pointer"},children:p}),e.jsxs($,{color:g,variant:"subtitle2",children:[d.length," followers"]}),e.jsxs($,{color:g,variant:"subtitle2",children:[o.length," following"]})]})]}),e.jsx(Xe,{title:"Profile settings",placement:"bottom",children:e.jsx(Qs,{sx:{fontSize:24,cursor:"pointer"}})})]})})};const Zs=({onButtonClick:s})=>{const[t,r]=i.useState(!1),[a,x]=i.useState(""),[l,m]=i.useState(null),[f,u]=i.useState(""),[j,g]=i.useState(!0),[h,p]=i.useState(!1),[d,o]=i.useState(0),[n,b]=i.useState(""),{_id:k,userName:w}=R(c=>c.user),O=R(c=>c.token),B=R(c=>c.mode),W=se();i.useEffect(()=>{(async()=>{const{dp:I}=await ce(k,O);x(I)})()},[k,O]);const q=async()=>{p(!0),setTimeout(()=>{p(!1)},4e3);const c=new FormData;if(c.append("userId",k),c.append("userName",w),c.append("description",f),l){const C=gs(js,`posts/${l.name+cs()}`);if(l.name.toLowerCase().endsWith(".mp4")){await xe(C,l);const U=await fe(C);c.append("video",U),c.append("videoPath",l.name)}else{await xe(C,l);const U=await fe(C);c.append("image",U),c.append("picturePath",l.name)}}const I=await ds(O,c);W(Te({posts:I.newPost})),m(null),u(""),p(!1),s()},_=c=>{u(c.target.value),/^\s*$/.test(c.target.value)?g(!0):g(!1)};return i.useEffect(()=>{const c=setInterval(()=>{o(I=>{if(I===100)return 0;const C=Math.random()*10;return Math.min(I+C,100)})},500);return()=>{clearInterval(c)}},[]),e.jsxs(e.Fragment,{children:[n.length>0&&e.jsx(is,{severity:"error",children:n}),e.jsxs(ee,{children:[e.jsxs(y,{gap:"1.5rem",children:[a?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:w,src:a})}):e.jsx(H,{alt:w}),B==="dark"?e.jsxs(e.Fragment,{children:[e.jsx(me,{placeholder:"Enter your thoughts",onChange:_,value:f,sx:{width:"100%",border:"2px solid black",color:"black",borderRadius:"2rem",padding:".5rem 1.5rem"},endAdornment:e.jsx(ge,{position:"end",children:e.jsx(L,{onClick:()=>r(!t),children:e.jsx(oe,{})})})}),e.jsx(L,{onClick:q,disabled:h||j,children:e.jsx(ae,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{placeholder:"Enter your thoughts",onChange:_,value:f,sx:{width:"100%",border:"2px solid black",color:"black",borderRadius:"2rem",padding:".5rem .2rem .5rem 1.5rem"},endAdornment:e.jsx(ge,{position:"end",children:e.jsx(L,{onClick:()=>r(!t),children:e.jsx(oe,{})})})}),e.jsx(L,{onClick:q,disabled:h||j,children:e.jsx(ae,{})})]})]}),t&&e.jsx(P,{border:"1px solid black",borderRadius:"5px",mt:"1rem",p:"1rem",children:e.jsx(ls,{multiple:!0,onDrop:(c,I)=>{console.log(c[0].name.endsWith("mp4"),"acc"),console.log(I,"rej"),c[0]&&c[0]&&(c[0].name.endsWith(".jpg")||c[0].name.endsWith(".png")||c[0].name.endsWith(".mp4"))?(m(c[0]),b("")):b("Please select a valid file")},children:({getRootProps:c,getInputProps:I})=>e.jsxs(y,{children:[e.jsxs(P,{...c(),sx:{"&:hover":{cursor:"pointer"}},children:[e.jsx(de,{...I()}),l?e.jsxs(y,{alignItems:"center",children:[e.jsx($,{children:l.name}),e.jsx(qs,{fontSize:"small"})]}):e.jsx("p",{children:"Upload image or video here"})]}),e.jsx(oe,{}),l&&e.jsx(L,{onClick:()=>m(null),sx:{width:"15%"},children:e.jsx(_e,{fontSize:"small"})})]})})}),h&&e.jsx(Hs,{variant:"determinate",value:d}),!j&&e.jsx($,{variant:"body2",children:"Please enter a post"}),e.jsx(X,{sx:{mt:"1rem"}})]})]})},Js=({postId:s,name:t,friendId:r,buttonClick:a})=>{const[x,l]=J.useState(null),[m,f]=J.useState(!1),u=le(),j=R(C=>C.user._id),g=R(C=>C.token),h=se(),[p,d]=J.useState(!1),[o,n]=i.useState(""),b=!!x,k=C=>{l(C.currentTarget)},w=()=>{l(null)},O=()=>{d(!0)},B=()=>{d(!1)},W=async(C,E)=>{w();const U=await ss(C,E,g);h(qe({unfollower:U==null?void 0:U.data.friend._id})),a(),ne.success(`You unfollowed ${t}`)},q=()=>{w(),f(!0)},_=()=>{f(!1)},c=async C=>{console.log(C),console.log(o);const E=await us(j,s,o,g);console.log(E),_(),B()},I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,borderRadios:"5px",p:2,height:"16rem",width:"30rem"};return e.jsxs(y,{m:"0.5rem 0 1.5rem 0",children:[e.jsxs(y,{gap:"1rem",onClick:()=>u(`/profile/${r}`),children:[e.jsx(H,{alt:t}),e.jsx(P,{children:e.jsx($,{variant:"h5",fontWeight:"500",sx:{"&:hover":{color:"blue",cursor:"pointer"}},children:t})})]}),e.jsxs("div",{children:[r===j?e.jsx(e.Fragment,{children:e.jsx(L,{"aria-label":"more",id:"long-button","aria-controls":b?"long-menu":void 0,"aria-expanded":b?"true":void 0,"aria-haspopup":"true",onClick:k,children:e.jsx(je,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(L,{"aria-label":"more",id:"long-button","aria-controls":b?"long-menu":void 0,"aria-expanded":b?"true":void 0,"aria-haspopup":"true",onClick:k,children:e.jsx(je,{})}),e.jsxs(Ge,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:x,open:b,onClose:w,PaperProps:{style:{width:"20ch"}},children:[e.jsx(pe,{onClick:q,sx:{color:"red"},children:"Report"}),e.jsx(pe,{onClick:()=>W(j,r),children:"Unfollow"})]})]}),e.jsx(Ze,{open:m,onClose:_,children:e.jsxs(P,{sx:I,children:[e.jsx($,{variant:"h4",textAlign:"center",gutterBottom:!0,children:"Report User"}),e.jsx($,{variant:"body1",gutterBottom:!0,children:"Enter the reason for report:"}),e.jsx(P,{sx:{width:"98%"},children:e.jsx(de,{name:"bio",label:"Enter....",fullWidth:!0,multiline:!0,rows:4,onChange:C=>n(C.target.value),value:o})}),e.jsxs(P,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[e.jsx(Q,{onClick:_,sx:{marginRight:1},children:"Cancel"}),e.jsx(Q,{variant:"contained",color:"primary",onClick:O,children:"Report"})]})]})}),e.jsxs(bs,{open:p,onClose:B,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(vs,{id:"alert-dialog-title",children:`Are you sure want to report ${t}?`}),e.jsx(Cs,{}),e.jsxs(ks,{children:[e.jsx(Q,{onClick:B,color:"error",children:"Disagree"}),e.jsx(Q,{onClick:()=>c(r),autoFocus:!0,color:"info",children:"Agree"})]})]})]})]})},et=({id:s,userId:t,description:r,userName:a,image:x,video:l,likes:m,commentList:f,globalClick:u})=>{const[j,g]=i.useState(!1),[h,p]=i.useState(""),[d,o]=i.useState([]),[n,b]=i.useState({}),k=R(v=>v.token),w=R(v=>v.user._id),{name:O}=R(v=>v.user),[B,W]=i.useState(m.includes(w)),[q,_]=i.useState(m.length),[c,I]=i.useState({status:!1,index:-1}),C=async(v,M)=>{ms(v,M,k),_(B?S=>S-1:S=>S+1),W(S=>!S)},E=async()=>{if(h&&!h.match(/^\s/)){if(n.userId)await hs(s,n.userId,n.comment,h),b({}),u();else{await ps(s,w,`${O} : ${h}`,k);const v=await re(s,k),{comments:M}=v.data.post;o(M),u()}p("")}},U=async()=>{const v=await re(s,k),{comments:M}=v.data.post;o(M),g(S=>!S),u()},Ne=async v=>{xs(s,v,k);const M=await re(s,k),{comments:S}=M.data.post;o(S),U(),u()},Ae=(v,M)=>{const S=v.split(":"),N=S[0].slice(0,S[0].length-1);b({name:`@${N}`,userId:M,comment:v}),u()},Fe=()=>{const[v,M]=i.useState(!0),S=()=>{M(N=>!N)};return e.jsxs("div",{style:{position:"relative"},children:[l?e.jsx("video",{src:l,width:"100%",style:{borderRadius:"0.75rem",marginTop:"0.75rem"},autoPlay:!0,loop:!0,muted:v,children:e.jsx("p",{children:"Your browser does not support the video tag."})}):e.jsx(P,{sx:{display:"flex"},children:e.jsx(Oe,{})}),e.jsx("button",{style:{position:"absolute",top:"20px",right:"10px",background:"transparent",border:"none",cursor:"pointer"},onClick:S,children:v?e.jsx(Xs,{}):e.jsx(Ys,{})})]})};return e.jsxs(ee,{width:"30rem",children:[e.jsx(Js,{postId:s,name:a,image:x,video:l,friendId:t,buttonClick:u}),e.jsx($,{sx:{mt:"1rem"},children:r}),x&&e.jsx("img",{src:x,alt:"img",width:"100%",loading:"lazy",style:{borderRadius:"0.75rem",marginTop:"0.75rem"}}),l&&e.jsx(Fe,{}),e.jsx(y,{mt:"0.25rem",children:e.jsxs(y,{gap:"1rem",children:[e.jsxs(y,{gap:"0.3rem",children:[e.jsx(L,{onClick:()=>C(s,w),children:B?e.jsx(Ks,{sx:{color:"red"}}):e.jsx(Es,{})}),e.jsx($,{children:q})]}),e.jsxs(y,{gap:"0.3rem",children:[e.jsx(L,{onClick:()=>U(),children:e.jsx(Ts,{})}),e.jsx($,{children:f.length})]})]})}),j&&e.jsxs(P,{mt:"0.5rem",bgcolor:"#f5f5f5",borderRadius:"8px",padding:"1rem",children:[d.map(({comment:v,userId:M,reply:S},N)=>e.jsxs(J.Fragment,{children:[e.jsxs(P,{children:[e.jsx(X,{}),e.jsxs(y,{alignItems:"center",children:[e.jsxs("div",{children:[e.jsx($,{sx:{"&:hover":{cursor:"pointer"},m:"0.5rem 0",pl:"1rem"},color:"black",children:v}),e.jsx("p",{onClick:()=>I(Z=>({...Z,[N]:!Z[N]})),style:{cursor:"pointer"},children:"Reply comments"}),c[N]&&S.map((Z,Ve)=>e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsx("p",{children:Z.reply},Ve)]}))]}),e.jsxs("div",{children:[e.jsx(Q,{variant:"text",sx:{color:"black"},onClick:()=>Ae(v,M),children:"Reply"}),M===w&&e.jsx(L,{size:"small",onClick:()=>Ne(N),children:e.jsx(_e,{})})]})]})]}),e.jsx(X,{})]},N)),e.jsxs(P,{display:"flex",alignItems:"center",mt:"0.5rem",children:[e.jsx(de,{variant:"outlined",fullWidth:!0,label:n.name?n.name:"Add a comment",size:"small",value:h,onChange:v=>p(v.target.value)}),n.name&&e.jsx(L,{onClick:()=>b({}),children:e.jsx(ns,{})}),e.jsx(L,{onClick:E,children:e.jsx(ae,{})})]})]}),e.jsx(X,{sx:{marginTop:"4rem"}})]})},st=({data:s,onButtonClick:t})=>{const r=se(),a=R(o=>o.token),x=R(o=>o.user._id),l=R(o=>o.user),[m,f]=i.useState([]),[u,j]=i.useState(!1),[g,h]=i.useState(!0),p=()=>{j(()=>!u)},d=async()=>{try{const o=await fs(a),n=o.filter(b=>l.followers.includes(b.userId)||b.userId==x);f(n),r(Ee({posts:o})),h(!1)}catch(o){throw o}};return i.useEffect(()=>{d()},[u,s]),e.jsxs(e.Fragment,{children:[g&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx(Oe,{})}),e.jsx("div",{children:m.map(({_id:o,userId:n,description:b,userName:k,image:w,video:O,likes:B,comments:W})=>e.jsx(et,{id:o,userId:n,description:b,userName:k,image:w,video:O,likes:B,commentList:W,click:p,globalClick:t},o))})]})},tt=({friendId:s,image:t,userName:r,handleshowFreind:a,onButtonClick:x})=>{const{_id:l,requested:m}=R(p=>p.user),f=le(),[u,j]=i.useState(m.some(p=>p.id===s)),g=async(p,d)=>{const o=await he(p,d);console.log(o,"requse send"),ne.success(o),j(!0),a(),x()},h=async(p,d)=>{j(!1);const o=await he(p,d);ne.success(o),console.log(o)};return e.jsxs(y,{m:"0.5rem 0 1.5rem 0",children:[e.jsxs(y,{gap:"1rem",children:[t?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:r,src:t})}):e.jsx(H,{alt:r}),e.jsx(P,{children:e.jsx($,{variant:"h5",fontWeight:"500",sx:{"&:hover":{color:"blue",cursor:"pointer"}},onClick:()=>f(`/profile/${s}`),children:r})})]}),u?e.jsx(L,{onClick:()=>h(l,s),children:e.jsx($,{variant:"h6",color:"blue",children:"Requested"})}):e.jsx(L,{onClick:()=>g(l,s),children:e.jsx($,{variant:"h6",color:"blue",children:"Follow"})})]})},rt=({onButtonClick:s})=>{const t=R(d=>d.token),r=R(d=>d.user._id),[a,x]=i.useState(!1),[l,m]=i.useState([]),[f,u]=i.useState(!1),[j,g]=i.useState(!0),h=async()=>{const d=await ts(t,r),o=await ce(r,t),n=d.filter(b=>!o.followers.includes(b._id));if(a)m(n);else{const b=n.slice(0,5);m(b)}g(!1)},p=()=>{u(()=>!f)};return i.useEffect(()=>{h()},[f,s,a]),e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx($,{children:"Suggested for you"}),e.jsx(Ke,{onClick:()=>x(!a),children:"See all"})]}),j?e.jsxs(y,{children:[e.jsx(V,{variant:"circular",width:50,height:50}),e.jsx(V,{width:80,height:45,sx:{alignItems:"start"}}),e.jsx(V,{width:70,height:50})]}):l.map(({userName:d,_id:o,dp:n})=>o!==r&&e.jsx(tt,{friendId:o,image:n,userName:d,handleshowFreind:p,onButtonClick:s},o))]})},ot=Je(s=>({contentContainer:{display:"flex",justifyContent:"space-evenly",[s.breakpoints.down("sm")]:{flexDirection:"column"}}})),wt=()=>{const s=ot(),t=os("(min-width: 800px)"),r=se(),[a,x]=i.useState(!1),l=R(f=>f.user._id);i.useEffect(()=>{r(Qe())},[]);const m=()=>{x(()=>!a),console.log("global click")};return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs(P,{className:s.contentContainer,children:[t&&e.jsx(as,{}),e.jsxs(P,{flexBasis:t?"26%":"100%",mt:t?void 0:"2rem",children:[e.jsx(Zs,{onButtonClick:m}),e.jsx(st,{data:a,onButtonClick:m})]}),t&&e.jsxs(P,{flexBasis:t?"26%":"100%",ml:"2rem",children:[e.jsx(Gs,{userId:l,picturePath:"",data:a}),e.jsx(rt,{onButtonClick:m})]})]}),e.jsx(es,{position:"bottom-left"})]})};export{wt as default};
