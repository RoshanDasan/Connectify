import{c as P,j as e,T as q,I as y,a as I,r as w,u as k,b as A,k as G,P as L,A as U,d as V,B as x,s as j,e as v,Q as f,f as F,g as T,p as W}from"./index-135ee7aa.js";import{V as B,a as E,u as R,b as $,c as b,d as o,e as M}from"./styles-37aa9b07.js";import{G as c}from"./Grid-5e361bee.js";import{r as O,l as z,g as D}from"./authConnect-d8bd7a44.js";import{C as H}from"./Container-982c8a80.js";const Q=P(e.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google"),t=({name:i,handleChange:h,value:p,error:a,label:u,half:l,autoFocus:d,type:m,handleShowPassword:g})=>e.jsx(c,{item:!0,xs:12,sm:l?6:12,children:e.jsx(q,{name:i,onChange:h,value:p,variant:"outlined",fullWidth:!0,label:u,autoFocus:d,type:m,error:!!a,helperText:a,InputProps:i==="password"?{endAdornment:e.jsx(y,{position:"end",children:e.jsx(I,{onClick:g,children:m==="password"?e.jsx(B,{}):e.jsx(E,{})})})}:void 0})}),ee=()=>{const i=R(),[h,p]=w.useState(!1),[a,u]=w.useState(!1),l=k(),d=A(),m=()=>{p(r=>!r)},g=async r=>{if(a)await O(r)==="success"&&u(!1);else{let n=await z(r);n&&(l(j({user:n.user,token:n.token})),l(v({user:n.user})),d("/home"),f.success("Login success"))}},C=async()=>{try{const r=await F(T,W),{user:n,token:S}=await D(r._tokenResponse);l(j({user:n,token:S})),l(v({user:n})),d("/home"),f.success("Login success")}catch(r){console.error("Google login error:",r),f.error("Google login failed")}},s=$({initialValues:{name:"",userName:"",number:"",email:"",password:"",confirmPassword:""},validationSchema:(()=>a?b().shape({name:o().required("Name is required"),userName:o().required("UserName is required"),number:o().required("Number is required"),email:o().email("Invalid email").required("Email is required"),password:o().required("Password is required"),confirmPassword:o().oneOf([M("password")],"Passwords must match")}):b().shape({userName:o().required("UserName is required"),password:o().required("Password is required")}))(),onSubmit:g}),N=()=>{u(r=>!r)};return e.jsxs(H,{component:"main",maxWidth:"xs",children:[e.jsx(G,{position:"bottom-left"}),e.jsxs(L,{className:i.paper,elevation:6,children:[e.jsx(U,{className:i.avatar}),e.jsx(V,{component:"h1",variant:"h5",children:a?"Sign up":"Sign in"}),e.jsxs("form",{className:i.form,onSubmit:s.handleSubmit,children:[e.jsxs(c,{container:!0,spacing:2,children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(t,{name:"name",label:"Name",handleChange:s.handleChange,value:s.values.name,error:s.errors.name,autoFocus:!0,half:!0}),e.jsx(t,{name:"userName",label:"UserName",handleChange:s.handleChange,value:s.values.userName,error:s.errors.userName,half:!0})]}),!a&&e.jsx(t,{name:"userName",label:"UserName",handleChange:s.handleChange,value:s.values.userName,error:s.errors.userName}),a&&e.jsxs(e.Fragment,{children:[e.jsx(t,{name:"number",label:"Number",handleChange:s.handleChange,value:s.values.number,error:s.errors.number,type:"number"}),e.jsx(t,{name:"email",label:"Email Address",handleChange:s.handleChange,value:s.values.email,error:s.errors.email,type:"email"})]}),e.jsx(t,{name:"password",label:"Password",handleChange:s.handleChange,value:s.values.password,error:s.errors.password,type:h?"text":"password",handleShowPassword:m}),a&&e.jsx(t,{name:"confirmPassword",label:"Repeat Password",handleChange:s.handleChange,value:s.values.confirmPassword,error:s.errors.confirmPassword,type:"password"})]}),e.jsx(x,{type:"submit",fullWidth:!0,variant:"contained",color:"info",sx:{marginTop:"20px"},className:i.submit,children:a?"Sign Up":"Sign In"}),e.jsx(c,{container:!0,justifyContent:"flex-end",children:e.jsx(c,{item:!0,children:e.jsx(x,{onClick:N,color:"inherit",children:a?"Already have an account? Login In":"New user? Sign Up"})})}),e.jsx(x,{fullWidth:!0,variant:"contained",color:"info",startIcon:e.jsx(Q,{}),onClick:C,children:"Sign in with Google"})]})]})]})};export{ee as default};
