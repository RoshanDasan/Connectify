import{g as Me,d as Le,k as G,e as q,f as z,_ as B,h as Z,r as l,i as ze,l as De,j as e,m as Be,n as Ue,o as We,p as He,c as A,a as ce,q as $,u as te,t as Te,R as ee,B as X,v as qe,w as Ee,x as Ke,y as Qe}from"./index-7ed0515d.js";import{T as Xe,N as Ye}from"./Navbar-839f3c20.js";import{u as Oe,T as S,a as he,I as L,M as Ge,b as Ze,Q as ae,m as Je,k as es}from"./api-7a6f78ae.js";/* empty css                      */import{g as de,f as ss,s as pe,a as ts}from"./userConnection-27733b23.js";import{s as rs,F as k}from"./DisplayFlex-1379c619.js";import{B as y,M as xe,u as os}from"./MenuItem-0910b349.js";import{S as W,d as ns,a as as}from"./Sidebar-f43b636a.js";import{A as H}from"./Avatar-f1476285.js";import{A as is,D as ls,v as cs}from"./v4-c3fbd0f1.js";import{u as ds,r as us,l as ms,a as hs,p as ps,g as oe,d as xs,b as fs}from"./postConnection-dd3bf3af.js";import{r as gs,b as js,u as fe,g as ge}from"./GoogleAuth-5ad9a5a3.js";import{I as je}from"./InputAdornment-23496d96.js";import{S as ie}from"./Send-2cb3efea.js";import{T as ue}from"./TextField-5375768a.js";import{D as Y}from"./makeStyles-11062be9.js";import{d as ve}from"./MoreVert-48c8c858.js";import{D as vs,a as bs,b as Cs,c as ks}from"./DialogTitle-be1c1084.js";import"./FormControl-b841cea4.js";function ys(s){return Me("MuiCircularProgress",s)}Le("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ws=["className","color","disableShrink","size","style","thickness","value","variant"];let re=s=>s,be,Ce,ke,ye;const V=44,Ps=G(be||(be=re`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Ss=G(Ce||(Ce=re`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),$s=s=>{const{classes:t,variant:r,color:a,disableShrink:f}=s,c={root:["root",r,`color${z(a)}`],svg:["svg"],circle:["circle",`circle${z(r)}`,f&&"circleDisableShrink"]};return Ue(c,ys,t)},Rs=q("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[r.variant],t[`color${z(r.color)}`]]}})(({ownerState:s,theme:t})=>B({display:"inline-block"},s.variant==="determinate"&&{transition:t.transitions.create("transform")},s.color!=="inherit"&&{color:(t.vars||t).palette[s.color].main}),({ownerState:s})=>s.variant==="indeterminate"&&Z(ke||(ke=re`
      animation: ${0} 1.4s linear infinite;
    `),Ps)),Is=q("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(s,t)=>t.svg})({display:"block"}),Ms=q("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.circle,t[`circle${z(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(({ownerState:s,theme:t})=>B({stroke:"currentColor"},s.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},s.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:s})=>s.variant==="indeterminate"&&!s.disableShrink&&Z(ye||(ye=re`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Ss)),Ls=l.forwardRef(function(t,r){const a=ze({props:t,name:"MuiCircularProgress"}),{className:f,color:c="primary",disableShrink:m=!1,size:g=40,style:u,thickness:v=3.6,value:p=0,variant:h="indeterminate"}=a,x=De(a,ws),d=B({},a,{color:c,disableShrink:m,size:g,thickness:v,value:p,variant:h}),o=$s(d),n={},C={},b={};if(h==="determinate"){const w=2*Math.PI*((V-v)/2);n.strokeDasharray=w.toFixed(3),b["aria-valuenow"]=Math.round(p),n.strokeDashoffset=`${((100-p)/100*w).toFixed(3)}px`,C.transform="rotate(-90deg)"}return e.jsx(Rs,B({className:Be(o.root,f),style:B({width:g,height:g},C,u),ownerState:d,ref:r,role:"progressbar"},b,x,{children:e.jsx(Is,{className:o.svg,ownerState:d,viewBox:`${V/2} ${V/2} ${V} ${V}`,children:e.jsx(Ms,{className:o.circle,style:n,ownerState:d,cx:V,cy:V,r:(V-v)/2,fill:"none",strokeWidth:v})})}))}),Ne=Ls;function zs(s){return Me("MuiLinearProgress",s)}Le("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const Ds=["className","color","value","valueBuffer","variant"];let K=s=>s,we,Pe,Se,$e,Re,Ie;const le=4,Bs=G(we||(we=K`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Us=G(Pe||(Pe=K`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Os=G(Se||(Se=K`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Ns=s=>{const{classes:t,variant:r,color:a}=s,f={root:["root",`color${z(a)}`,r],dashed:["dashed",`dashedColor${z(a)}`],bar1:["bar",`barColor${z(a)}`,(r==="indeterminate"||r==="query")&&"bar1Indeterminate",r==="determinate"&&"bar1Determinate",r==="buffer"&&"bar1Buffer"],bar2:["bar",r!=="buffer"&&`barColor${z(a)}`,r==="buffer"&&`color${z(a)}`,(r==="indeterminate"||r==="query")&&"bar2Indeterminate",r==="buffer"&&"bar2Buffer"]};return Ue(f,zs,t)},me=(s,t)=>t==="inherit"?"currentColor":s.vars?s.vars.palette.LinearProgress[`${t}Bg`]:s.palette.mode==="light"?We(s.palette[t].main,.62):He(s.palette[t].main,.5),_s=q("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.root,t[`color${z(r.color)}`],t[r.variant]]}})(({ownerState:s,theme:t})=>B({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:me(t,s.color)},s.color==="inherit"&&s.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},s.variant==="buffer"&&{backgroundColor:"transparent"},s.variant==="query"&&{transform:"rotate(180deg)"})),As=q("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.dashed,t[`dashedColor${z(r.color)}`]]}})(({ownerState:s,theme:t})=>{const r=me(t,s.color);return B({position:"absolute",marginTop:0,height:"100%",width:"100%"},s.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${r} 0%, ${r} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Z($e||($e=K`
    animation: ${0} 3s infinite linear;
  `),Os)),Fs=q("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.bar,t[`barColor${z(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar1Indeterminate,r.variant==="determinate"&&t.bar1Determinate,r.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:s,theme:t})=>B({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:s.color==="inherit"?"currentColor":(t.vars||t).palette[s.color].main},s.variant==="determinate"&&{transition:`transform .${le}s linear`},s.variant==="buffer"&&{zIndex:1,transition:`transform .${le}s linear`}),({ownerState:s})=>(s.variant==="indeterminate"||s.variant==="query")&&Z(Re||(Re=K`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Bs)),Vs=q("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(s,t)=>{const{ownerState:r}=s;return[t.bar,t[`barColor${z(r.color)}`],(r.variant==="indeterminate"||r.variant==="query")&&t.bar2Indeterminate,r.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:s,theme:t})=>B({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},s.variant!=="buffer"&&{backgroundColor:s.color==="inherit"?"currentColor":(t.vars||t).palette[s.color].main},s.color==="inherit"&&{opacity:.3},s.variant==="buffer"&&{backgroundColor:me(t,s.color),transition:`transform .${le}s linear`}),({ownerState:s})=>(s.variant==="indeterminate"||s.variant==="query")&&Z(Ie||(Ie=K`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Us)),Ws=l.forwardRef(function(t,r){const a=ze({props:t,name:"MuiLinearProgress"}),{className:f,color:c="primary",value:m,valueBuffer:g,variant:u="indeterminate"}=a,v=De(a,Ds),p=B({},a,{color:c,variant:u}),h=Ns(p),x=Oe(),d={},o={bar1:{},bar2:{}};if((u==="determinate"||u==="buffer")&&m!==void 0){d["aria-valuenow"]=Math.round(m),d["aria-valuemin"]=0,d["aria-valuemax"]=100;let n=m-100;x.direction==="rtl"&&(n=-n),o.bar1.transform=`translateX(${n}%)`}if(u==="buffer"&&g!==void 0){let n=(g||0)-100;x.direction==="rtl"&&(n=-n),o.bar2.transform=`translateX(${n}%)`}return e.jsxs(_s,B({className:Be(h.root,f),ownerState:p,role:"progressbar"},d,{ref:r},v,{children:[u==="buffer"?e.jsx(As,{className:h.dashed,ownerState:p}):null,e.jsx(Fs,{className:h.bar1,ownerState:p,style:o.bar1}),u==="determinate"?null:e.jsx(Vs,{className:h.bar2,ownerState:p,style:o.bar2})]}))}),Hs=Ws,ne=A(e.jsx("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h4.05l1.83-2h4.24l1.83 2H20v12zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"}),"CameraAltOutlined"),Ts=A(e.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutlineOutlined"),_e=A(e.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),qs=A(e.jsx("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined"),Es=A(e.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorderOutlined"),Ks=A(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"FavoriteOutlined"),Qs=A(e.jsx("path",{d:"M4 18v-.65c0-.34.16-.66.41-.81C6.1 15.53 8.03 15 10 15c.03 0 .05 0 .08.01.1-.7.3-1.37.59-1.98-.22-.02-.44-.03-.67-.03-2.42 0-4.68.67-6.61 1.82-.88.52-1.39 1.5-1.39 2.53V20h9.26c-.42-.6-.75-1.28-.97-2H4zm6-6c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm10.75 10c0-.22-.03-.42-.06-.63l1.14-1.01-1-1.73-1.45.49c-.32-.27-.68-.48-1.08-.63L18 11h-2l-.3 1.49c-.4.15-.76.36-1.08.63l-1.45-.49-1 1.73 1.14 1.01c-.03.21-.06.41-.06.63s.03.42.06.63l-1.14 1.01 1 1.73 1.45-.49c.32.27.68.48 1.08.63L16 21h2l.3-1.49c.4-.15.76-.36 1.08-.63l1.45.49 1-1.73-1.14-1.01c.03-.21.06-.41.06-.63zM17 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"}),"ManageAccountsOutlined"),Xs=A(e.jsx("path",{d:"M4.34 2.93 2.93 4.34 7.29 8.7 7 9H3v6h4l5 5v-6.59l4.18 4.18c-.65.49-1.38.88-2.18 1.11v2.06c1.34-.3 2.57-.92 3.61-1.75l2.05 2.05 1.41-1.41L4.34 2.93zM10 15.17 7.83 13H5v-2h2.83l.88-.88L10 11.41v3.76zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zm-7-8-1.88 1.88L12 7.76zm4.5 8c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"}),"VolumeOffOutlined"),Ys=A(e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm7-.17v6.34L7.83 13H5v-2h2.83L10 8.83zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z"}),"VolumeUpOutlined"),se=rs(y)(({})=>({padding:"1.5rem 1.5rem 0.75rem 1.5rem",borderRadius:"0.75rem"})),Gs=({userId:s,data:t})=>{const[r,a]=l.useState(null),[f,c]=l.useState(!0),m=Oe(),g=ce(),u=$(n=>n.token),v=m.palette.text.primary,p=m.palette.text.secondary,h=async()=>{try{const n=await de(s,u);a(n),c(!1)}catch(n){throw n}};if(l.useEffect(()=>{h()},[t]),f)return e.jsx(se,{children:e.jsxs(k,{gap:"0.5rem",pb:"1.1rem",children:[e.jsx("div",{children:e.jsxs(k,{children:[e.jsx(W,{variant:"circular",width:40,height:40}),e.jsx("div",{children:e.jsxs(y,{ml:5,children:[e.jsx(W,{width:90,height:40}),e.jsx(W,{width:70,height:15}),e.jsx(W,{width:70,height:15})]})})]})}),e.jsx(W,{width:55,height:55})]})});const{userName:x,followers:d,following:o}=r;return e.jsx(se,{children:e.jsxs(k,{gap:"0.5rem",pb:"1.1rem",onClick:()=>g(`/profile/${s}`),children:[e.jsxs(k,{gap:"1rem",alignItems:"center",children:[r.dp?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:r.userName,src:r.dp})}):e.jsx(H,{alt:r.userName}),e.jsxs(y,{children:[e.jsx(S,{variant:"h4",color:v,fontWeight:"bold",sx:{cursor:"pointer"},children:x}),e.jsxs(S,{color:p,variant:"subtitle2",children:[d.length," followers"]}),e.jsxs(S,{color:p,variant:"subtitle2",children:[o.length," following"]})]})]}),e.jsx(Xe,{title:"Profile settings",placement:"bottom",children:e.jsx(Qs,{sx:{fontSize:24,cursor:"pointer"}})})]})})};const Zs=({onButtonClick:s})=>{const[t,r]=l.useState(!1),[a,f]=l.useState(""),[c,m]=l.useState(null),[g,u]=l.useState(""),[v,p]=l.useState(!0),[h,x]=l.useState(!1),[d,o]=l.useState(0),[n,C]=l.useState(""),{_id:b,userName:w}=$(i=>i.user),D=$(i=>i.token),F=$(i=>i.mode),N=te();l.useEffect(()=>{(async()=>{const{dp:R}=await de(b,D);f(R)})()},[b,D]);const E=async()=>{x(!0),setTimeout(()=>{x(!1)},4e3);const i=new FormData;if(i.append("userId",b),i.append("userName",w),i.append("description",g),c){const U=gs(js,`posts/${c.name+cs()}`);if(c.name.toLowerCase().endsWith(".mp4")){await fe(U,c);const O=await ge(U);i.append("video",O),i.append("videoPath",c.name)}else{await fe(U,c);const O=await ge(U);i.append("image",O),i.append("picturePath",c.name)}}const R=await ds(D,i);N(Te({posts:R.newPost})),m(null),u(""),x(!1),s()},T=i=>{u(i.target.value),/^\s*$/.test(i.target.value)?p(!0):p(!1)};return l.useEffect(()=>{const i=setInterval(()=>{o(R=>{if(R===100)return 0;const U=Math.random()*10;return Math.min(R+U,100)})},500);return()=>{clearInterval(i)}},[]),e.jsxs(e.Fragment,{children:[n.length>0&&e.jsx(is,{severity:"error",children:n}),e.jsxs(se,{children:[e.jsxs(k,{gap:"1.5rem",children:[a?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:w,src:a})}):e.jsx(H,{alt:w}),F==="dark"?e.jsxs(e.Fragment,{children:[e.jsx(he,{placeholder:"Enter your thoughts",onChange:T,value:g,sx:{width:"100%",border:"2px solid black",color:"black",borderRadius:"2rem",padding:".5rem 1.5rem"},endAdornment:e.jsx(je,{position:"end",children:e.jsx(L,{onClick:()=>r(!t),children:e.jsx(ne,{})})})}),e.jsx(L,{onClick:E,disabled:h||v,children:e.jsx(ie,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{placeholder:"Enter your thoughts",onChange:T,value:g,sx:{width:"100%",border:"2px solid black",color:"black",borderRadius:"2rem",padding:".5rem .2rem .5rem 1.5rem"},endAdornment:e.jsx(je,{position:"end",children:e.jsx(L,{onClick:()=>r(!t),children:e.jsx(ne,{})})})}),e.jsx(L,{onClick:E,disabled:h||v,children:e.jsx(ie,{})})]})]}),t&&e.jsx(y,{border:"1px solid black",borderRadius:"5px",mt:"1rem",p:"1rem",children:e.jsx(ls,{multiple:!0,onDrop:(i,R)=>{console.log(i[0].name.endsWith("mp4"),"acc"),console.log(R,"rej"),i[0]&&i[0]&&(i[0].name.endsWith(".jpg")||i[0].name.endsWith(".png")||i[0].name.endsWith(".mp4"))?(m(i[0]),C("")):C("Please select a valid file")},children:({getRootProps:i,getInputProps:R})=>e.jsxs(k,{children:[e.jsxs(y,{...i(),sx:{"&:hover":{cursor:"pointer"}},children:[e.jsx(ue,{...R()}),c?e.jsxs(k,{alignItems:"center",children:[e.jsx(S,{children:c.name}),e.jsx(qs,{fontSize:"small"})]}):e.jsx("p",{children:"Upload image or video here"})]}),e.jsx(ne,{}),c&&e.jsx(L,{onClick:()=>m(null),sx:{width:"15%"},children:e.jsx(_e,{fontSize:"small"})})]})})}),h&&e.jsx(Hs,{variant:"determinate",value:d}),!v&&e.jsx(S,{variant:"body2",children:"Please enter a post"}),e.jsx(Y,{sx:{mt:"1rem"}})]})]})},Js=({postId:s,name:t,image:r,friendId:a,buttonClick:f})=>{const[c,m]=ee.useState(null),[g,u]=ee.useState(!1),v=ce(),p=$(I=>I.user._id),h=$(I=>I.token),x=te(),[d,o]=ee.useState(!1),[n,C]=l.useState(""),b=!!c,w=I=>{m(I.currentTarget)},D=()=>{m(null)},F=()=>{o(!0)},N=()=>{o(!1)},E=async(I,O)=>{D();const Q=await ss(I,O,h);x(qe({unfollower:Q==null?void 0:Q.data.friend._id})),f(),ae.success(`You unfollowed ${t}`)},T=()=>{D(),u(!0)},i=()=>{u(!1)},R=async I=>{console.log(I),console.log(n);const O=await us(p,s,n,h);console.log(O),i(),N()},U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",boxShadow:24,borderRadios:"5px",p:2,height:"16rem",width:"30rem"};return e.jsxs(k,{m:"0.5rem 0 1.5rem 0",children:[e.jsxs(k,{gap:"1rem",onClick:()=>v(`/profile/${a}`),children:[r?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:t,src:`http://localhost:5000/uploads/${r}`})}):e.jsx(H,{alt:t}),e.jsx(y,{children:e.jsx(S,{variant:"h5",fontWeight:"500",sx:{"&:hover":{color:"blue",cursor:"pointer"}},children:t})})]}),e.jsxs("div",{children:[a===p?e.jsx(e.Fragment,{children:e.jsx(L,{"aria-label":"more",id:"long-button","aria-controls":b?"long-menu":void 0,"aria-expanded":b?"true":void 0,"aria-haspopup":"true",onClick:w,children:e.jsx(ve,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(L,{"aria-label":"more",id:"long-button","aria-controls":b?"long-menu":void 0,"aria-expanded":b?"true":void 0,"aria-haspopup":"true",onClick:w,children:e.jsx(ve,{})}),e.jsxs(Ge,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:c,open:b,onClose:D,PaperProps:{style:{width:"20ch"}},children:[e.jsx(xe,{onClick:T,sx:{color:"red"},children:"Report"}),e.jsx(xe,{onClick:()=>E(p,a),children:"Unfollow"})]})]}),e.jsx(Ze,{open:g,onClose:i,children:e.jsxs(y,{sx:U,children:[e.jsx(S,{variant:"h4",textAlign:"center",gutterBottom:!0,children:"Report User"}),e.jsx(S,{variant:"body1",gutterBottom:!0,children:"Enter the reason for report:"}),e.jsx(y,{sx:{width:"98%"},children:e.jsx(ue,{name:"bio",label:"Enter....",fullWidth:!0,multiline:!0,rows:4,onChange:I=>C(I.target.value),value:n})}),e.jsxs(y,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[e.jsx(X,{onClick:i,sx:{marginRight:1},children:"Cancel"}),e.jsx(X,{variant:"contained",color:"primary",onClick:F,children:"Report"})]})]})}),e.jsxs(vs,{open:d,onClose:N,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(bs,{id:"alert-dialog-title",children:`Are you sure want to report ${t}?`}),e.jsx(Cs,{}),e.jsxs(ks,{children:[e.jsx(X,{onClick:N,color:"error",children:"Disagree"}),e.jsx(X,{onClick:()=>R(a),autoFocus:!0,color:"info",children:"Agree"})]})]})]})]})},et=({id:s,userId:t,description:r,userName:a,image:f,video:c,likes:m,commentList:g,globalClick:u})=>{const[v,p]=l.useState(!1),[h,x]=l.useState(""),[d,o]=l.useState([]),[n,C]=l.useState({}),b=$(j=>j.token),w=$(j=>j.user._id),{name:D}=$(j=>j.user),[F,N]=l.useState(m.includes(w)),[E,T]=l.useState(m.length),[i,R]=l.useState({status:!1,index:-1}),U=async(j,M)=>{ms(j,M,b),T(F?P=>P-1:P=>P+1),N(P=>!P)},I=async()=>{if(h&&!h.match(/^\s/)){if(n.userId)await hs(s,n.userId,n.comment,h),C({}),u();else{await ps(s,w,`${D} : ${h}`,b);const j=await oe(s,b),{comments:M}=j.data.post;o(M),u()}x("")}},O=async()=>{const j=await oe(s,b),{comments:M}=j.data.post;o(M),p(P=>!P),u()},Q=async j=>{xs(s,j,b);const M=await oe(s,b),{comments:P}=M.data.post;o(P),O(),u()},Ae=(j,M)=>{const P=j.split(":"),_=P[0].slice(0,P[0].length-1);C({name:`@${_}`,userId:M,comment:j}),u()},Fe=()=>{const[j,M]=l.useState(!0),P=()=>{M(_=>!_)};return e.jsxs("div",{style:{position:"relative"},children:[c?e.jsx("video",{src:c,width:"100%",style:{borderRadius:"0.75rem",marginTop:"0.75rem"},autoPlay:!0,loop:!0,muted:j,children:e.jsx("p",{children:"Your browser does not support the video tag."})}):e.jsx(y,{sx:{display:"flex"},children:e.jsx(Ne,{})}),e.jsx("button",{style:{position:"absolute",top:"20px",right:"10px",background:"transparent",border:"none",cursor:"pointer"},onClick:P,children:j?e.jsx(Xs,{}):e.jsx(Ys,{})})]})};return e.jsxs(se,{width:"30rem",children:[e.jsx(Js,{postId:s,name:a,image:f,video:c,friendId:t,buttonClick:u}),e.jsx(S,{sx:{mt:"1rem"},children:r}),f&&e.jsx("img",{src:f,alt:"img",width:"100%",loading:"lazy",style:{borderRadius:"0.75rem",marginTop:"0.75rem"}}),c&&e.jsx(Fe,{}),e.jsx(k,{mt:"0.25rem",children:e.jsxs(k,{gap:"1rem",children:[e.jsxs(k,{gap:"0.3rem",children:[e.jsx(L,{onClick:()=>U(s,w),children:F?e.jsx(Ks,{sx:{color:"red"}}):e.jsx(Es,{})}),e.jsx(S,{children:E})]}),e.jsxs(k,{gap:"0.3rem",children:[e.jsx(L,{onClick:()=>O(),children:e.jsx(Ts,{})}),e.jsx(S,{children:g.length})]})]})}),v&&e.jsxs(y,{mt:"0.5rem",bgcolor:"#f5f5f5",borderRadius:"8px",padding:"1rem",children:[d.map(({comment:j,userId:M,reply:P},_)=>e.jsxs(ee.Fragment,{children:[e.jsxs(y,{children:[e.jsx(Y,{}),e.jsxs(k,{alignItems:"center",children:[e.jsxs("div",{children:[e.jsx(S,{sx:{"&:hover":{cursor:"pointer"},m:"0.5rem 0",pl:"1rem"},color:"black",children:j}),e.jsx("p",{onClick:()=>R(J=>({...J,[_]:!J[_]})),style:{cursor:"pointer"},children:"Reply comments"}),i[_]&&P.map((J,Ve)=>e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx("p",{children:J.reply},Ve)]}))]}),e.jsxs("div",{children:[e.jsx(X,{variant:"text",sx:{color:"black"},onClick:()=>Ae(j,M),children:"Reply"}),M===w&&e.jsx(L,{size:"small",onClick:()=>Q(_),children:e.jsx(_e,{})})]})]})]}),e.jsx(Y,{})]},_)),e.jsxs(y,{display:"flex",alignItems:"center",mt:"0.5rem",children:[e.jsx(ue,{variant:"outlined",fullWidth:!0,label:n.name?n.name:"Add a comment",size:"small",value:h,onChange:j=>x(j.target.value)}),n.name&&e.jsx(L,{onClick:()=>C({}),children:e.jsx(ns,{})}),e.jsx(L,{onClick:I,children:e.jsx(ie,{})})]})]}),e.jsx(Y,{sx:{marginTop:"4rem"}})]})},st=({data:s,onButtonClick:t})=>{const r=te(),a=$(o=>o.token),f=$(o=>o.user._id),c=$(o=>o.user),[m,g]=l.useState([]),[u,v]=l.useState(!1),[p,h]=l.useState(!0),x=()=>{v(()=>!u)},d=async()=>{try{const o=await fs(a),n=o.filter(C=>c.followers.includes(C.userId)||C.userId==f);g(n),r(Ee({posts:o})),h(!1)}catch(o){throw o}};return l.useEffect(()=>{d()},[u,s]),e.jsxs(e.Fragment,{children:[p&&e.jsx("div",{style:{textAlign:"center"},children:e.jsx(Ne,{})}),e.jsx("div",{children:m.map(({_id:o,userId:n,description:C,userName:b,image:w,video:D,likes:F,comments:N})=>e.jsx(et,{id:o,userId:n,description:C,userName:b,image:w,video:D,likes:F,commentList:N,click:x,globalClick:t},o))})]})},tt=({friendId:s,image:t,userName:r,handleshowFreind:a,onButtonClick:f})=>{const{_id:c,requested:m}=$(x=>x.user),g=ce(),[u,v]=l.useState(m.some(x=>x.id===s)),p=async(x,d)=>{const o=await pe(x,d);console.log(o,"requse send"),ae.success(o),v(!0),a(),f()},h=async(x,d)=>{v(!1);const o=await pe(x,d);ae.success(o),console.log(o)};return e.jsxs(k,{m:"0.5rem 0 1.5rem 0",children:[e.jsxs(k,{gap:"1rem",children:[t?e.jsx("div",{className:"profile-picture",children:e.jsx(H,{alt:r,src:t})}):e.jsx(H,{alt:r}),e.jsx(y,{children:e.jsx(S,{variant:"h5",fontWeight:"500",sx:{"&:hover":{color:"blue",cursor:"pointer"}},onClick:()=>g(`/profile/${s}`),children:r})})]}),u?e.jsx(L,{onClick:()=>h(c,s),children:e.jsx(S,{variant:"h6",color:"blue",children:"Requested"})}):e.jsx(L,{onClick:()=>p(c,s),children:e.jsx(S,{variant:"h6",color:"blue",children:"Follow"})})]})},rt=({onButtonClick:s})=>{const t=$(d=>d.token),r=$(d=>d.user._id),[a,f]=l.useState(!1),[c,m]=l.useState([]),[g,u]=l.useState(!1),[v,p]=l.useState(!0),h=async()=>{const d=await ts(t,r),o=await de(r,t),n=d.filter(C=>!o.followers.includes(C._id));if(a)m(n);else{const C=n.slice(0,5);m(C)}p(!1)},x=()=>{u(()=>!g)};return l.useEffect(()=>{h()},[g,s,a]),e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(S,{children:"Suggested for you"}),e.jsx(Ke,{onClick:()=>f(!a),children:"See all"})]}),v?e.jsxs(k,{children:[e.jsx(W,{variant:"circular",width:50,height:50}),e.jsx(W,{width:80,height:45,sx:{alignItems:"start"}}),e.jsx(W,{width:70,height:50})]}):c.map(({userName:d,_id:o,dp:n})=>o!==r&&e.jsx(tt,{friendId:o,image:n,userName:d,handleshowFreind:x,onButtonClick:s},o))]})},ot=Je(s=>({contentContainer:{display:"flex",justifyContent:"space-evenly",[s.breakpoints.down("sm")]:{flexDirection:"column"}}})),wt=()=>{const s=ot(),t=os("(min-width: 800px)"),r=te(),[a,f]=l.useState(!1),c=$(g=>g.user._id);l.useEffect(()=>{r(Qe())},[]);const m=()=>{f(()=>!a)};return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs(y,{className:s.contentContainer,children:[t&&e.jsx(as,{}),e.jsxs(y,{flexBasis:t?"26%":"100%",mt:t?void 0:"2rem",children:[e.jsx(Zs,{onButtonClick:m}),e.jsx(st,{data:a,onButtonClick:m})]}),t&&e.jsxs(y,{flexBasis:t?"26%":"100%",ml:"2rem",children:[e.jsx(Gs,{userId:c,picturePath:"",data:a}),e.jsx(rt,{onButtonClick:m})]})]}),e.jsx(es,{position:"bottom-left"})]})};export{wt as default};
